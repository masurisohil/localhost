(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"L+yV":function(e,t,i){"use strict";i.r(t);var a=i("ofXK"),r=i("tyNb"),n=i("g3N6"),o=i("uq2c"),s=i("OTx7"),c=i("ZOsW"),d=i("PCNd"),l=i("Vr6k"),b=i("3Pt+"),u=i("KUiO"),m=i("FasR"),h=i("fXoL"),p=i("c8VH"),g=i("AytR"),v=i("tk/3");let S=(()=>{class e{constructor(e){this.http=e,this.API_URL=g.a.APIEndpoint}getClientList(e){return this.http.get(`${this.API_URL}/client`,{params:e})}addClient(e){return this.http.post(`${this.API_URL}/client`,e)}editClient(e,t){return this.http.put(`${this.API_URL}/client/${e}`,t)}getClientById(e,t=null){return this.http.get(`${this.API_URL}/client/${e}`,{params:t})}}return e.\u0275fac=function(t){return new(t||e)(h.Wb(v.b))},e.\u0275prov=h.Ib({token:e,factory:e.\u0275fac}),e})();var f=i("jTkZ"),R=i("Eb8l"),_=i("LPFR"),y=i("Pbud");function C(e,t){if(1&e){const e=h.Tb();h.Sb(0,"pagination",11),h.ac("onPageChange",(function(t){return h.tc(e),h.cc().getPage(t)})),h.Rb()}if(2&e){const e=h.cc();h.ic("paginationList",e.pagination)("currentPage",e.currentPage)}}let w=(()=>{class e{constructor(e,t){this.paginationService=e,this.clientService=t,this.PageTitle="Manage Client",this.loadform=!1,this.loadingState=!0,this.objectArray=[],this.pagination=null,this.searchText=null,this.currentPage=1,this.permissionObject=null,this.showPagination=!1,this.headerData=[]}ngOnInit(){this.loadform=!1,this.setHeaderData(),this.getObjects()}setHeaderData(){this.headerData.push(new m.f({label:"Client Name",key:"client_name"}),new m.f({label:"Client Code",key:"client_code"}),new m.f({label:"Email",key:"user.email"}),new m.f({label:"Phone Number",key:"user.phone_number"}),new m.f({label:"Address\t",key:"address.country_name"}));let e=new m.a({edit:{path:"/manage/client/edit/",id:"client_id"},delete:{path:"client/",id:"client_id"}});this.headerData.push(e)}getObjects(){const e={page:this.currentPage};this.searchText&&(e.search=this.searchText),this.clientService.getClientList(e).subscribe(e=>{this.loadingState=!1,e.success?(this.objectArray=e.data.list,this.showPagination=!0,this.pagination=this.paginationService.getPager(e.data.pagination.total_page,this.currentPage)):(this.objectArray=[],this.pagination=null)},e=>{this.loadingState=!1,this.objectArray=[],this.pagination=null})}getPage(e){this.currentPage=e,this.getObjects()}searchObject(e){this.searchText=e,this.currentPage=1,this.getObjects()}onReloadEvent(){this.getObjects()}}return e.\u0275fac=function(t){return new(t||e)(h.Mb(p.a),h.Mb(S))},e.\u0275cmp=h.Gb({type:e,selectors:[["app-client-list"]],decls:13,vars:7,consts:[[1,"side-container"],[1,"page-header"],[1,"row","m-0"],[1,"mr-auto"],[1,"ml-3"],[3,"placeholder","text"],[3,"btnName","editData"],[1,"card"],[1,"card-body"],[3,"headerData","rawData","reloadEvent"],[3,"paginationList","currentPage","onPageChange",4,"ngIf"],[3,"paginationList","currentPage","onPageChange"]],template:function(e,t){1&e&&(h.Sb(0,"div",0),h.Sb(1,"div",1),h.Sb(2,"div",2),h.Sb(3,"h2",3),h.Bc(4),h.Rb(),h.Sb(5,"div",4),h.Sb(6,"search-box",5),h.ac("text",(function(e){return t.searchObject(e)})),h.Rb(),h.Rb(),h.Sb(7,"div",4),h.Nb(8,"app-btn-add",6),h.Rb(),h.Rb(),h.Rb(),h.Sb(9,"div",7),h.Sb(10,"div",8),h.Sb(11,"app-table-list",9),h.ac("reloadEvent",(function(){return t.onReloadEvent()})),h.Rb(),h.zc(12,C,1,2,"pagination",10),h.Rb(),h.Rb(),h.Rb()),2&e&&(h.zb(4),h.Cc(t.PageTitle),h.zb(2),h.ic("placeholder","Search Here..."),h.zb(2),h.ic("btnName","Add Client")("editData","/manage/client/add"),h.zb(3),h.ic("headerData",t.headerData)("rawData",t.objectArray),h.zb(1),h.ic("ngIf",t.showPagination))},directives:[f.a,R.a,_.a,a.l,y.a],encapsulation:2}),e})();var P=i("8cFx"),B=i("HOh6"),x=i("UaFz"),F=i("/SVk");function L(e,t){if(1&e&&h.Nb(0,"span",37),2&e){const e=h.cc();h.ic("innerHTML",e.formErrors.client_code,h.uc)}}const N=function(e){return{"has-error":e}};let z=(()=>{class e{constructor(e,t,i,a,r){this.router=e,this.activatedRoute=t,this.fb=i,this.clientService=a,this.commonService=r,this.PageTitle="Client",this.editImageUrl=null,this.addNewRadio=!1,this.categoryListArray=[],this.brandListArray=[],this.loadingState=!1,this.showLoader=!1,this.formErrors={client_code:null,apierror:null},this.isEditing=!1,this.editId=null,this.countryListArray=[],this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id")),this.addForm=this.fb.group({client_name:[null,b.t.compose([b.t.required])],client_code:[null,b.t.compose([b.t.required])],phone_number:[null,b.t.compose([b.t.required])],dial_code:[null,b.t.compose([b.t.required])],email:[null,b.t.compose([b.t.required,b.t.email])],address:[null],country_name:[null],first_name:[null,b.t.compose([b.t.required])],last_name:[null,b.t.compose([b.t.required])],country_id:[null,b.t.compose([b.t.required])],tax_id:[null,b.t.compose([b.t.required])],state:[null,b.t.compose([b.t.required])],city:[null,b.t.compose([b.t.required])],street_address:[null,b.t.compose([b.t.required])]})}ngOnInit(){this.getCountryList(),this.isEditing&&this.getEditObject()}getCountryList(){this.commonService.getCountryList().subscribe(e=>{e.success&&(this.countryListArray=e.data.country_list)})}getEditObject(){this.clientService.getClientById(this.editId).subscribe(e=>{e.success?(this.editImageUrl=e.data.image,this.addForm.patchValue({client_name:e.data.client_name,category_id:e.data.category_id,dial_code:e.data.user.dial_code,client_code:e.data.client_code,tax_id:e.data.tax_id,first_name:e.data.user.first_name,last_name:e.data.user.last_name,phone_number:e.data.user.phone_number,email:e.data.user.email,country_name:e.data.address.country_name,country_id:e.data.address.country_id,state:e.data.address.state,city:e.data.address.city,street_address:e.data.address.street_address?e.data.address.street_address:""})):this.router.navigateByUrl("/manage/client")})}fileChangeEvent(e){if(!e.target.files[0].name.match(/(.*?)\.(jpg|jpeg|png|gif|giff)$/))return swal.fire("Invalid File!","Please select valid file ","error"),this.removeFile(),!1;this.removeFile(),this.selectedFile=e.target.files[0]}removeFile(){this.selectedFile=null}getCountryName(e){this.addForm.patchValue({country_name:e.label})}submitForm(e){if(e.valid){this.showLoader=!0;const t=new FormData;t.append("client_name",e.value.client_name),t.append("client_code",e.value.client_code),t.append("phone_number",e.value.phone_number),t.append("first_name",e.value.first_name),t.append("last_name",e.value.last_name),t.append("dial_code",e.value.dial_code),t.append("email",e.value.email),t.append("tax_id",e.value.tax_id),t.append("address",JSON.stringify({country_id:e.value.country_id,country_name:e.value.country_name,state:e.value.state,city:e.value.city,street_address:e.value.street_address})),this.selectedFile&&t.append("file",this.selectedFile),this.isEditing?this.clientService.editClient(this.editId,t).subscribe(e=>{this.showLoader=!1,e.success?this.router.navigateByUrl("/manage/client"):e.error.map(t=>{t.hasOwnProperty("client_code")?this.formErrors.client_code=t.client_code:this.formErrors.apierror=`* ${e.error}`})},e=>{this.showLoader=!1}):this.clientService.addClient(t).subscribe(e=>{this.showLoader=!1,e.success?this.router.navigateByUrl("/manage/client"):e.error.map(t=>{t.hasOwnProperty("client_code")?this.formErrors.client_code=t.client_code:this.formErrors.apierror=`* ${e.error}`})},e=>{this.showLoader=!1})}}}return e.\u0275fac=function(t){return new(t||e)(h.Mb(r.e),h.Mb(r.a),h.Mb(b.e),h.Mb(S),h.Mb(P.a))},e.\u0275cmp=h.Gb({type:e,selectors:[["app-add-client"]],decls:125,vars:21,consts:[[1,"side-container"],[1,"page-header"],[1,"row","m-0"],[1,"col"],[1,"mr-auto"],[1,"card"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"row"],[1,"col-4"],[1,"clearfix"],["data-provides","fileinput",1,"fileinput","text-center","fileinput-new"],[1,"btn-file","mt-3"],[1,"thumbnail","fileinput-new","uploaded-user-image","rounded-circle",2,"width","150px","height","150px"],["alt","",3,"src"],[1,"fileinput-new","btn","btn-dark","btn-sm","btn-file","mt-3"],["accept","image/x-png,image/jpeg","type","file","file-model","myFile",3,"change"],[1,"fileinput-preview","fileinput-exists","thumbnail","uploaded-user-image","rounded-circle",2,"width","150px","height","150px"],[1,"text-center"],["data-dismiss","fileinput",1,"btn","btn-link","btn-sm","fileinput-exists","mt-3",3,"click"],[1,"clearfix","mt-3"],[1,"upload-img-label","text-muted","font-size-12"],[1,"col-8"],[1,"col-6"],[1,"form-group"],[1,"control-label","text-md-right"],[1,""],["type","text","placeholder","",1,"form-control",3,"formControl"],[1,"",3,"ngClass"],["class","help-block",3,"innerHTML",4,"ngIf"],["bindLabel","label","bindValue","value","placeholder","Select Country",3,"formControl","items","change"],[1,"d-flex"],["number","","type","text","placeholder","Enter dial number",1,"form-control","mr-2",2,"width","100px",3,"formControl"],["number","","type","text","placeholder","Enter phone number",1,"form-control",3,"formControl"],[1,"text-right","border-top","py-4","mt-5","card-footer"],["type","button","routerLink","/manage/client",1,"btn","btn-light"],["type","submit",1,"btn","btn-secondary","ml-2"],[1,"help-block",3,"innerHTML"]],template:function(e,t){1&e&&(h.Sb(0,"div",0),h.Sb(1,"div",1),h.Sb(2,"div",2),h.Sb(3,"div",3),h.Sb(4,"h2",4),h.Bc(5),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(6,"div",5),h.Sb(7,"form",6),h.ac("ngSubmit",(function(){return t.submitForm(t.addForm)})),h.Sb(8,"div",7),h.Sb(9,"div"),h.Sb(10,"div",8),h.Sb(11,"div",9),h.Sb(12,"div",10),h.Sb(13,"div",11),h.Sb(14,"div",12),h.Sb(15,"div",13),h.Nb(16,"img",14),h.Rb(),h.Nb(17,"div",10),h.Sb(18,"button",15),h.Bc(19," Browse Image "),h.Rb(),h.Sb(20,"input",16),h.ac("change",(function(e){return t.fileChangeEvent(e)})),h.Rb(),h.Nb(21,"div",17),h.Rb(),h.Sb(22,"div",18),h.Sb(23,"a",19),h.ac("click",(function(){return t.removeFile()})),h.Bc(24,"Remove"),h.Rb(),h.Rb(),h.Sb(25,"div",20),h.Sb(26,"p",21),h.Bc(27,"*Recommended Size:"),h.Nb(28,"br"),h.Bc(29,"Minimum 250 * 250"),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(30,"div",22),h.Sb(31,"div",8),h.Sb(32,"div",23),h.Sb(33,"div",24),h.Sb(34,"label",25),h.Bc(35,"First Name "),h.Sb(36,"em"),h.Bc(37,"*"),h.Rb(),h.Rb(),h.Sb(38,"div",26),h.Nb(39,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Sb(40,"div",23),h.Sb(41,"div",24),h.Sb(42,"label",25),h.Bc(43,"Last Name "),h.Sb(44,"em"),h.Bc(45,"*"),h.Rb(),h.Rb(),h.Sb(46,"div",26),h.Nb(47,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Sb(48,"div",23),h.Sb(49,"div",24),h.Sb(50,"label",25),h.Bc(51,"Client Name "),h.Sb(52,"em"),h.Bc(53,"*"),h.Rb(),h.Rb(),h.Sb(54,"div",26),h.Nb(55,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Sb(56,"div",23),h.Sb(57,"div",24),h.Sb(58,"label",25),h.Bc(59,"Client Code "),h.Sb(60,"em"),h.Bc(61,"*"),h.Rb(),h.Rb(),h.Sb(62,"div",28),h.Nb(63,"input",27),h.zc(64,L,1,1,"span",29),h.Rb(),h.Rb(),h.Rb(),h.Sb(65,"div",23),h.Sb(66,"div",24),h.Sb(67,"label",25),h.Bc(68,"Country "),h.Sb(69,"em"),h.Bc(70,"*"),h.Rb(),h.Rb(),h.Sb(71,"div",26),h.Sb(72,"ng-select",30),h.ac("change",(function(e){return t.getCountryName(e)})),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(73,"div",23),h.Sb(74,"div",24),h.Sb(75,"label",25),h.Bc(76,"State "),h.Sb(77,"em"),h.Bc(78,"*"),h.Rb(),h.Rb(),h.Sb(79,"div",26),h.Nb(80,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Sb(81,"div",23),h.Sb(82,"div",24),h.Sb(83,"label",25),h.Bc(84,"City "),h.Sb(85,"em"),h.Bc(86,"*"),h.Rb(),h.Rb(),h.Sb(87,"div",26),h.Nb(88,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Sb(89,"div",23),h.Sb(90,"div",24),h.Sb(91,"label",25),h.Bc(92,"Street Address "),h.Sb(93,"em"),h.Bc(94,"*"),h.Rb(),h.Rb(),h.Sb(95,"div",26),h.Nb(96,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Sb(97,"div",23),h.Sb(98,"div",24),h.Sb(99,"label",25),h.Bc(100,"Tax "),h.Sb(101,"em"),h.Bc(102,"*"),h.Rb(),h.Rb(),h.Sb(103,"div",26),h.Nb(104,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(105,"div",24),h.Sb(106,"label",25),h.Bc(107,"Phone Number "),h.Sb(108,"em"),h.Bc(109,"*"),h.Rb(),h.Rb(),h.Sb(110,"div",31),h.Nb(111,"input",32),h.Nb(112,"input",33),h.Rb(),h.Rb(),h.Sb(113,"div",24),h.Sb(114,"label",25),h.Bc(115,"Email "),h.Sb(116,"em"),h.Bc(117,"*"),h.Rb(),h.Rb(),h.Sb(118,"div",26),h.Nb(119,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(120,"div",34),h.Sb(121,"button",35),h.Bc(122,"Cancel"),h.Rb(),h.Sb(123,"button",36),h.Bc(124,"Submit"),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb()),2&e&&(h.zb(5),h.Ec("",t.isEditing?"Update":"Create"," ",t.PageTitle,""),h.zb(2),h.ic("formGroup",t.addForm),h.zb(9),h.ic("src",t.editImageUrl?t.editImageUrl:"assets/no_image.png",h.vc),h.zb(23),h.ic("formControl",t.addForm.controls.first_name),h.zb(8),h.ic("formControl",t.addForm.controls.last_name),h.zb(8),h.ic("formControl",t.addForm.controls.client_name),h.zb(7),h.ic("ngClass",h.mc(19,N,t.formErrors.client_code)),h.zb(1),h.ic("formControl",t.addForm.controls.client_code),h.zb(1),h.ic("ngIf",t.formErrors.client_code),h.zb(8),h.ic("formControl",t.addForm.controls.country_id)("items",t.countryListArray),h.zb(8),h.ic("formControl",t.addForm.controls.state),h.zb(8),h.ic("formControl",t.addForm.controls.city),h.zb(8),h.ic("formControl",t.addForm.controls.street_address),h.zb(8),h.ic("formControl",t.addForm.controls.tax_id),h.zb(7),h.ic("formControl",t.addForm.controls.dial_code),h.zb(1),h.ic("formControl",t.addForm.controls.phone_number),h.zb(7),h.ic("formControl",t.addForm.controls.email))},directives:[b.v,b.p,B.a,b.j,b.c,b.o,b.g,x.a,a.j,a.l,c.a,F.a,r.f],encapsulation:2}),e})();var E=i("QSzr");i.d(t,"ClientModule",(function(){return j}));const I=[{path:"",component:w,data:{title:"client_list"}},{path:"add",component:z,data:{title:"add_client"}},{path:"edit/:id",component:z,data:{title:"edit_client"}}];let j=(()=>{class e{}return e.\u0275mod=h.Kb({type:e}),e.\u0275inj=h.Jb({factory:function(t){return new(t||e)},providers:[S],imports:[[a.b,r.i.forChild(I),s.a,n.a,o.a,b.l,b.s,l.a,d.a,u.a,E.a,c.b]]}),e})()}}]);
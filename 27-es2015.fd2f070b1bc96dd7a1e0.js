(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{LhZO:function(e,t,o){"use strict";o.r(t);var r=o("ofXK"),i=o("tyNb"),n=o("3Pt+"),a=o("zzOR"),b=o("fXoL"),d=o("HNGx"),c=o("AwSQ"),l=o("HOh6"),s=o("Jvtu"),u=o("UaFz"),m=o("/SVk");function p(e,t){if(1&e){const e=b.Tb();b.Sb(0,"tr",33),b.Sb(1,"td"),b.Sb(2,"div",34),b.Cc(3),b.Rb(),b.Rb(),b.Sb(4,"td"),b.Nb(5,"input",35),b.Rb(),b.Sb(6,"td"),b.Nb(7,"input",36),b.Rb(),b.Sb(8,"td",22),b.Nb(9,"input",37),b.Rb(),b.Sb(10,"td",22),b.Sb(11,"input",38),b.ac("input",(function(){b.uc(e);const o=t.index;return b.cc().setMissingQuantity(o)})),b.Rb(),b.Rb(),b.Sb(12,"td",22),b.Sb(13,"input",39),b.ac("input",(function(){b.uc(e);const o=t.index;return b.cc().setMissingQuantity(o)})),b.Rb(),b.Rb(),b.Sb(14,"td",22),b.Nb(15,"input",40),b.Rb(),b.Rb()}if(2&e){const e=t.index;b.jc("formGroupName",e),b.zb(3),b.Dc(e+1)}}let v=(()=>{class e{constructor(e,t,o,r,i,b){this.activatedRoute=e,this.unloadService=t,this.location=o,this.fb=r,this.dataService=i,this.router=b,this.PageTitle="Genrate Unloading",this.exampleOptions={defaultDate:new Date,dateFormat:a.a,noCalendar:!0},this.orderDetails={},this.productList=[],this.date_format="M/d/yy",this.addForm=this.fb.group({delivery_name:[null,n.t.compose([n.t.required])],delivery_phone:[null,n.t.compose([n.t.required])],delivery_vehicle_no:[null,n.t.compose([n.t.required])],receiver_name:[null,n.t.compose([n.t.required])],receiver_phone:[null,n.t.compose([n.t.required])],notes:[null],unload_detail:this.fb.array([])}),this.activatedRoute.snapshot.paramMap.get("id")&&(this.viewId=this.activatedRoute.snapshot.paramMap.get("id"))}ngOnInit(){this.dataService.currentCompany.subscribe(e=>{e&&(this.timezone=e.timezone.label,this.time_format=e.time_format.label,this.date_format=e.date_format.label,this.currentCompany=e)}),this.getObject()}back(){this.location.back()}getObject(){this.unloadService.getUnloadReportsDetails(this.viewId).subscribe(e=>{e.success?(this.orderDetails=e.data.order_detail,this.productList=e.data.product,this.setData()):(this.orderDetails={},this.productList=[])},e=>{this.orderDetails={},this.productList=[]})}setData(){if(this.addForm.patchValue({notes:this.orderDetails.notes,delivery_name:this.orderDetails.delivery_name,delivery_phone:this.orderDetails.delivery_phone,delivery_vehicle_no:this.orderDetails.delivery_vehicle_no,receiver_name:this.orderDetails.receiver_name,receiver_phone:this.orderDetails.receiver_phone}),this.productList.length>0){const e=this.addForm.get("unload_detail");for(let t=0;t<=e.length+1;t++)e.removeAt(t);this.productList.forEach((t,o)=>{e.push(this.fb.group({unload_detail_id:t.unload_detail_id,sku_no:t.sku_no,product_name:t.product_name,order_qty:t.order_qty,received_qty:t.received_qty,missing_qty:t.missing_qty,damaged_qty:t.damaged_qty}))})}}submitForm(e){if(e.valid){this.showLoader=!0;const t=new FormData;t.append("delivery_name",e.value.delivery_name),t.append("delivery_phone",e.value.delivery_phone),t.append("delivery_vehicle_no",e.value.delivery_vehicle_no),t.append("receiver_name",e.value.receiver_name),t.append("receiver_phone",e.value.receiver_phone),t.append("unload_detail",JSON.stringify(e.value.unload_detail)),t.append("notes",e.value.notes?e.value.notes:""),this.unloadService.getUnloadSubmitReports(this.viewId,t).subscribe(e=>{this.showLoader=!1,e.success&&this.back()},e=>{this.showLoader=!1})}}addNewRow(){this.addForm.get("unload_detail").push(this.initRows())}initRows(){return new n.i({unload_detail_id:new n.f(""),sku_no:new n.f(""),product_name:new n.f(""),order_qty:new n.f(0,n.t.compose([n.t.required])),received_qty:new n.f(0,n.t.compose([n.t.required])),missing_qty:new n.f(0,n.t.compose([n.t.required])),damaged_qty:new n.f(0,n.t.compose([n.t.required]))})}setMissingQuantity(e){const t=this.addForm.controls.unload_detail.at(e),o=t.value.damaged_qty,r=t.value.received_qty,i=t.value.order_qty,n=Number(i)-(Number(r)+Number(o))>0?Number(i)-(Number(r)+Number(o)):0;t.controls.missing_qty.setValue(n)}}return e.\u0275fac=function(t){return new(t||e)(b.Mb(i.a),b.Mb(d.a),b.Mb(r.h),b.Mb(n.e),b.Mb(c.a),b.Mb(i.e))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-generate-unloading"]],decls:117,vars:16,consts:[[1,"container-fluid"],[1,"page-header","border-b"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"card"],["role","form",1,"form-horizontal","pb-4",3,"formGroup","ngSubmit"],[1,"row","mt-3"],[1,"col-7","pl-3"],[1,"col-6"],[1,"form-group"],[1,"control-label","text-md-right"],[1,""],["type","text","disabled","",1,"form-control",3,"value"],[1,"date-picker"],["disabled","",3,"setDate","config"],[1,"date-picker-icon"],[1,"fa","fa-calendar"],["rows","2",1,"form-control",3,"formControl"],[1,"row","mt-4"],[1,"table-responsive-md","mt-3"],[1,"table"],[1,"text-center"],["formArrayName","unload_detail"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","mt-4","border","border-left-0","border-right-0","pt-4","pb-2"],[1,"col-md-6"],["type","text","placeholder","",1,"form-control",3,"formControl"],["number","","type","text","placeholder","",1,"form-control",3,"formControl"],[1,"row","mt-2"],[1,"text-right"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-secondary","ml-2"],[3,"formGroupName"],[1,"p-1"],["type","text","formControlName","sku_no","disabled","",1,"input_formarray","form-control"],["type","text","formControlName","product_name","disabled","",1,"input_formarray","form-control"],["type","text","formControlName","order_qty","disabled","",1,"input_formarray","form-control"],["type","text","formControlName","received_qty",1,"input_formarray","form-control",3,"input"],["type","text","formControlName","damaged_qty",1,"input_formarray","form-control",3,"input"],["type","text","formControlName","missing_qty","disabled","",1,"input_formarray","form-control"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Sb(2,"div",2),b.Sb(3,"div",3),b.Sb(4,"h2",4),b.Cc(5),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(6,"div",5),b.Sb(7,"form",6),b.ac("ngSubmit",(function(){return t.submitForm(t.addForm)})),b.Sb(8,"div",7),b.Sb(9,"div",8),b.Sb(10,"div",2),b.Sb(11,"div",9),b.Sb(12,"div",10),b.Sb(13,"label",11),b.Cc(14,"PO Date "),b.Sb(15,"em"),b.Cc(16,"*"),b.Rb(),b.Rb(),b.Sb(17,"div",12),b.Nb(18,"input",13),b.dc(19,"date"),b.Rb(),b.Rb(),b.Rb(),b.Sb(20,"div",9),b.Sb(21,"div",10),b.Sb(22,"label",11),b.Cc(23,"Date of Receipt "),b.Sb(24,"em"),b.Cc(25,"*"),b.Rb(),b.Rb(),b.Sb(26,"div",14),b.Nb(27,"ng2-flatpickr",15),b.Sb(28,"span",16),b.Nb(29,"span",17),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(30,"div",2),b.Sb(31,"div",3),b.Sb(32,"div",10),b.Sb(33,"label",11),b.Cc(34,"Notes"),b.Rb(),b.Nb(35,"textarea",18),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(36,"div",19),b.Sb(37,"div",3),b.Sb(38,"h5"),b.Cc(39,"Items"),b.Rb(),b.Sb(40,"div",20),b.Sb(41,"table",21),b.Sb(42,"thead"),b.Sb(43,"tr"),b.Sb(44,"th"),b.Cc(45,"No."),b.Rb(),b.Sb(46,"th"),b.Cc(47,"SKU no"),b.Rb(),b.Sb(48,"th"),b.Cc(49,"Product"),b.Rb(),b.Sb(50,"th",22),b.Cc(51,"Order Qty"),b.Rb(),b.Sb(52,"th",22),b.Cc(53,"Receive Qty"),b.Rb(),b.Sb(54,"th",22),b.Cc(55,"Damaged Qty "),b.Rb(),b.Sb(56,"th",22),b.Cc(57,"Missing Qty"),b.Rb(),b.Rb(),b.Rb(),b.Sb(58,"tbody",23),b.Ac(59,p,16,2,"tr",24),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(60,"div",25),b.Sb(61,"div",26),b.Sb(62,"h5"),b.Cc(63,"Delivery By"),b.Rb(),b.Sb(64,"div",7),b.Sb(65,"div",26),b.Sb(66,"div",10),b.Sb(67,"label",11),b.Cc(68,"Name "),b.Sb(69,"em"),b.Cc(70,"*"),b.Rb(),b.Rb(),b.Sb(71,"div",12),b.Nb(72,"input",27),b.Rb(),b.Rb(),b.Rb(),b.Sb(73,"div",26),b.Sb(74,"div",10),b.Sb(75,"label",11),b.Cc(76,"Phone No. "),b.Sb(77,"em"),b.Cc(78,"*"),b.Rb(),b.Rb(),b.Sb(79,"div",12),b.Nb(80,"input",28),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(81,"div",29),b.Sb(82,"div",26),b.Sb(83,"div",10),b.Sb(84,"label",11),b.Cc(85,"Vehicle No. "),b.Sb(86,"em"),b.Cc(87,"*"),b.Rb(),b.Rb(),b.Sb(88,"div",12),b.Nb(89,"input",27),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(90,"div",26),b.Sb(91,"h5"),b.Cc(92,"Received By"),b.Rb(),b.Sb(93,"div",7),b.Sb(94,"div",26),b.Sb(95,"div",10),b.Sb(96,"label",11),b.Cc(97,"Name "),b.Sb(98,"em"),b.Cc(99,"*"),b.Rb(),b.Rb(),b.Sb(100,"div",12),b.Nb(101,"input",27),b.Rb(),b.Rb(),b.Rb(),b.Sb(102,"div",26),b.Sb(103,"div",10),b.Sb(104,"label",11),b.Cc(105,"Phone No. "),b.Sb(106,"em"),b.Cc(107,"*"),b.Rb(),b.Rb(),b.Sb(108,"div",12),b.Nb(109,"input",28),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(110,"div",7),b.Sb(111,"div",3),b.Sb(112,"div",30),b.Sb(113,"button",31),b.ac("click",(function(){return t.back()})),b.Cc(114,"Cancel"),b.Rb(),b.Sb(115,"button",32),b.Cc(116,"Submit"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()),2&e&&(b.zb(5),b.Dc(t.PageTitle),b.zb(2),b.jc("formGroup",t.addForm),b.zb(11),b.jc("value",b.gc(19,12,null==t.orderDetails?null:t.orderDetails.po_date,t.date_format,t.timezone)),b.zb(9),b.jc("setDate",null==t.orderDetails?null:t.orderDetails.receipt_date)("config",t.exampleOptions),b.zb(8),b.jc("formControl",t.addForm.controls.notes),b.zb(24),b.jc("ngForOf",t.addForm.controls.unload_detail.controls),b.zb(13),b.jc("formControl",t.addForm.controls.delivery_name),b.zb(8),b.jc("formControl",t.addForm.controls.delivery_phone),b.zb(9),b.jc("formControl",t.addForm.controls.delivery_vehicle_no),b.zb(12),b.jc("formControl",t.addForm.controls.receiver_name),b.zb(8),b.jc("formControl",t.addForm.controls.receiver_phone))},directives:[n.v,n.p,l.a,n.j,s.a,n.c,n.o,u.a,n.g,n.d,r.k,m.a,n.k,n.h],pipes:[r.d],styles:[".input_formarray[_ngcontent-%COMP%] {\n    width: 80%;\n  }"]}),e})();var f=o("Vr6k"),h=o("PCNd");o.d(t,"GenerateUnloadingModule",(function(){return R}));const S=[{path:":id",component:v}];let R=(()=>{class e{}return e.\u0275mod=b.Kb({type:e}),e.\u0275inj=b.Jb({factory:function(t){return new(t||e)},imports:[[r.b,i.i.forChild(S),s.b,n.l,f.a,h.a,n.s]]}),e})()},xgIS:function(e,t,o){"use strict";o.d(t,"a",(function(){return b}));var r=o("HDdC"),i=o("DH7j"),n=o("n6bG"),a=o("lJxs");function b(e,t,o,d){return Object(n.a)(o)&&(d=o,o=void 0),d?b(e,t,o).pipe(Object(a.a)(e=>Object(i.a)(e)?d(...e):d(e))):new r.a(r=>{!function e(t,o,r,i,n){let a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(o,r,n),a=()=>e.removeEventListener(o,r,n)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){const e=t;t.on(o,r),a=()=>e.off(o,r)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){const e=t;t.addListener(o,r),a=()=>e.removeListener(o,r)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let a=0,b=t.length;a<b;a++)e(t[a],o,r,i,n)}i.add(a)}(e,t,(function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),r,o)})}}}]);
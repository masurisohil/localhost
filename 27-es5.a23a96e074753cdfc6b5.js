function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{LhZO:function(e,t,r){"use strict";r.r(t);var o=r("ofXK"),n=r("tyNb"),i=r("3Pt+"),a=r("fXoL"),b=r("HNGx"),d=r("HOh6"),l=r("Jvtu"),c=r("UaFz"),u=r("/SVk");function s(e,t){if(1&e){var r=a.Tb();a.Sb(0,"tr",33),a.Sb(1,"td"),a.Sb(2,"div",34),a.Cc(3),a.Rb(),a.Rb(),a.Sb(4,"td"),a.Nb(5,"input",35),a.Rb(),a.Sb(6,"td"),a.Nb(7,"input",36),a.Rb(),a.Sb(8,"td",22),a.Nb(9,"input",37),a.Rb(),a.Sb(10,"td",22),a.Sb(11,"input",38),a.ac("input",(function(){a.uc(r);var e=t.index;return a.cc().setMissingQuantity(e)})),a.Rb(),a.Rb(),a.Sb(12,"td",22),a.Sb(13,"input",39),a.ac("input",(function(){a.uc(r);var e=t.index;return a.cc().setMissingQuantity(e)})),a.Rb(),a.Rb(),a.Sb(14,"td",22),a.Nb(15,"input",40),a.Rb(),a.Rb()}if(2&e){var o=t.index;a.jc("formGroupName",o),a.zb(3),a.Dc(o+1)}}var p,v=((p=function(){function e(t,r,o,n,a){_classCallCheck(this,e),this.activatedRoute=t,this.unloadService=r,this.location=o,this.fb=n,this.router=a,this.PageTitle="Genrate Unloading",this.exampleOptions={defaultDate:new Date,noCalendar:!0},this.orderDetails={},this.productList=[],this.addForm=this.fb.group({delivery_name:[null,i.t.compose([i.t.required])],delivery_phone:[null,i.t.compose([i.t.required])],delivery_vehicle_no:[null,i.t.compose([i.t.required])],receiver_name:[null,i.t.compose([i.t.required])],receiver_phone:[null,i.t.compose([i.t.required])],notes:[null],unload_detail:this.fb.array([])}),this.activatedRoute.snapshot.paramMap.get("id")&&(this.viewId=this.activatedRoute.snapshot.paramMap.get("id"))}return _createClass(e,[{key:"ngOnInit",value:function(){this.getObject()}},{key:"back",value:function(){this.location.back()}},{key:"getObject",value:function(){var e=this;this.unloadService.getUnloadReportsDetails(this.viewId).subscribe((function(t){t.success?(e.orderDetails=t.data.order_detail,e.productList=t.data.product,e.setData()):(e.orderDetails={},e.productList=[])}),(function(t){e.orderDetails={},e.productList=[]}))}},{key:"setData",value:function(){var e=this;if(this.addForm.patchValue({notes:this.orderDetails.notes,delivery_name:this.orderDetails.delivery_name,delivery_phone:this.orderDetails.delivery_phone,delivery_vehicle_no:this.orderDetails.delivery_vehicle_no,receiver_name:this.orderDetails.receiver_name,receiver_phone:this.orderDetails.receiver_phone}),this.productList.length>0){for(var t=this.addForm.get("unload_detail"),r=0;r<=t.length+1;r++)t.removeAt(r);this.productList.forEach((function(r,o){t.push(e.fb.group({unload_detail_id:r.unload_detail_id,sku_no:r.sku_no,product_name:r.product_name,order_qty:r.order_qty,received_qty:r.received_qty,missing_qty:r.missing_qty,damaged_qty:r.damaged_qty}))}))}}},{key:"submitForm",value:function(e){var t=this;if(e.valid){this.showLoader=!0;var r=new FormData;r.append("delivery_name",e.value.delivery_name),r.append("delivery_phone",e.value.delivery_phone),r.append("delivery_vehicle_no",e.value.delivery_vehicle_no),r.append("receiver_name",e.value.receiver_name),r.append("receiver_phone",e.value.receiver_phone),r.append("unload_detail",JSON.stringify(e.value.unload_detail)),r.append("notes",e.value.notes?e.value.notes:""),this.unloadService.getUnloadSubmitReports(this.viewId,r).subscribe((function(e){t.showLoader=!1,e.success&&t.back()}),(function(e){t.showLoader=!1}))}}},{key:"addNewRow",value:function(){this.addForm.get("unload_detail").push(this.initRows())}},{key:"initRows",value:function(){return new i.i({unload_detail_id:new i.f(""),sku_no:new i.f(""),product_name:new i.f(""),order_qty:new i.f(0,i.t.compose([i.t.required])),received_qty:new i.f(0,i.t.compose([i.t.required])),missing_qty:new i.f(0,i.t.compose([i.t.required])),damaged_qty:new i.f(0,i.t.compose([i.t.required]))})}},{key:"setMissingQuantity",value:function(e){var t=this.addForm.controls.unload_detail.at(e),r=t.value.damaged_qty,o=t.value.received_qty,n=t.value.order_qty,i=Number(n)-(Number(o)+Number(r))>0?Number(n)-(Number(o)+Number(r)):0;t.controls.missing_qty.setValue(i)}}]),e}()).\u0275fac=function(e){return new(e||p)(a.Mb(n.a),a.Mb(b.a),a.Mb(o.h),a.Mb(i.e),a.Mb(n.e))},p.\u0275cmp=a.Gb({type:p,selectors:[["app-generate-unloading"]],decls:117,vars:14,consts:[[1,"container-fluid"],[1,"page-header","border-b"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"card"],["role","form",1,"form-horizontal","pb-4",3,"formGroup","ngSubmit"],[1,"row","mt-3"],[1,"col-7","pl-3"],[1,"col-6"],[1,"form-group"],[1,"control-label","text-md-right"],[1,""],["type","text","disabled","",1,"form-control",3,"value"],[1,"date-picker"],["disabled","",3,"setDate","config"],[1,"date-picker-icon"],[1,"fa","fa-calendar"],["rows","2",1,"form-control",3,"formControl"],[1,"row","mt-4"],[1,"table-responsive-md","mt-3"],[1,"table"],[1,"text-center"],["formArrayName","unload_detail"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","mt-4","border","border-left-0","border-right-0","pt-4","pb-2"],[1,"col-md-6"],["type","text","placeholder","",1,"form-control",3,"formControl"],["number","","type","text","placeholder","",1,"form-control",3,"formControl"],[1,"row","mt-2"],[1,"text-right"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-secondary","ml-2"],[3,"formGroupName"],[1,"p-1"],["type","text","formControlName","sku_no","disabled","",1,"input_formarray","form-control"],["type","text","formControlName","product_name","disabled","",1,"input_formarray","form-control"],["type","text","formControlName","order_qty","disabled","",1,"input_formarray","form-control"],["type","text","formControlName","received_qty",1,"input_formarray","form-control",3,"input"],["type","text","formControlName","damaged_qty",1,"input_formarray","form-control",3,"input"],["type","text","formControlName","missing_qty","disabled","",1,"input_formarray","form-control"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Sb(3,"div",3),a.Sb(4,"h2",4),a.Cc(5),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(6,"div",5),a.Sb(7,"form",6),a.ac("ngSubmit",(function(){return t.submitForm(t.addForm)})),a.Sb(8,"div",7),a.Sb(9,"div",8),a.Sb(10,"div",2),a.Sb(11,"div",9),a.Sb(12,"div",10),a.Sb(13,"label",11),a.Cc(14,"PO Date "),a.Sb(15,"em"),a.Cc(16,"*"),a.Rb(),a.Rb(),a.Sb(17,"div",12),a.Nb(18,"input",13),a.dc(19,"date"),a.Rb(),a.Rb(),a.Rb(),a.Sb(20,"div",9),a.Sb(21,"div",10),a.Sb(22,"label",11),a.Cc(23,"Date of Receipt "),a.Sb(24,"em"),a.Cc(25,"*"),a.Rb(),a.Rb(),a.Sb(26,"div",14),a.Nb(27,"ng2-flatpickr",15),a.Sb(28,"span",16),a.Nb(29,"span",17),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(30,"div",2),a.Sb(31,"div",3),a.Sb(32,"div",10),a.Sb(33,"label",11),a.Cc(34,"Notes"),a.Rb(),a.Nb(35,"textarea",18),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(36,"div",19),a.Sb(37,"div",3),a.Sb(38,"h5"),a.Cc(39,"Items"),a.Rb(),a.Sb(40,"div",20),a.Sb(41,"table",21),a.Sb(42,"thead"),a.Sb(43,"tr"),a.Sb(44,"th"),a.Cc(45,"No."),a.Rb(),a.Sb(46,"th"),a.Cc(47,"SKU no"),a.Rb(),a.Sb(48,"th"),a.Cc(49,"Product"),a.Rb(),a.Sb(50,"th",22),a.Cc(51,"Order Qty"),a.Rb(),a.Sb(52,"th",22),a.Cc(53,"Receive Qty"),a.Rb(),a.Sb(54,"th",22),a.Cc(55,"Damaged Qty "),a.Rb(),a.Sb(56,"th",22),a.Cc(57,"Missing Qty"),a.Rb(),a.Rb(),a.Rb(),a.Sb(58,"tbody",23),a.Ac(59,s,16,2,"tr",24),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(60,"div",25),a.Sb(61,"div",26),a.Sb(62,"h5"),a.Cc(63,"Delivery By"),a.Rb(),a.Sb(64,"div",7),a.Sb(65,"div",26),a.Sb(66,"div",10),a.Sb(67,"label",11),a.Cc(68,"Name "),a.Sb(69,"em"),a.Cc(70,"*"),a.Rb(),a.Rb(),a.Sb(71,"div",12),a.Nb(72,"input",27),a.Rb(),a.Rb(),a.Rb(),a.Sb(73,"div",26),a.Sb(74,"div",10),a.Sb(75,"label",11),a.Cc(76,"Phone No. "),a.Sb(77,"em"),a.Cc(78,"*"),a.Rb(),a.Rb(),a.Sb(79,"div",12),a.Nb(80,"input",28),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(81,"div",29),a.Sb(82,"div",26),a.Sb(83,"div",10),a.Sb(84,"label",11),a.Cc(85,"Vehicle No. "),a.Sb(86,"em"),a.Cc(87,"*"),a.Rb(),a.Rb(),a.Sb(88,"div",12),a.Nb(89,"input",27),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(90,"div",26),a.Sb(91,"h5"),a.Cc(92,"Received By"),a.Rb(),a.Sb(93,"div",7),a.Sb(94,"div",26),a.Sb(95,"div",10),a.Sb(96,"label",11),a.Cc(97,"Name "),a.Sb(98,"em"),a.Cc(99,"*"),a.Rb(),a.Rb(),a.Sb(100,"div",12),a.Nb(101,"input",27),a.Rb(),a.Rb(),a.Rb(),a.Sb(102,"div",26),a.Sb(103,"div",10),a.Sb(104,"label",11),a.Cc(105,"Phone No. "),a.Sb(106,"em"),a.Cc(107,"*"),a.Rb(),a.Rb(),a.Sb(108,"div",12),a.Nb(109,"input",28),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(110,"div",7),a.Sb(111,"div",3),a.Sb(112,"div",30),a.Sb(113,"button",31),a.ac("click",(function(){return t.back()})),a.Cc(114,"Cancel"),a.Rb(),a.Sb(115,"button",32),a.Cc(116,"Submit"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.zb(5),a.Dc(t.PageTitle),a.zb(2),a.jc("formGroup",t.addForm),a.zb(11),a.jc("value",a.ec(19,12,null==t.orderDetails?null:t.orderDetails.po_date)),a.zb(9),a.jc("setDate",null==t.orderDetails?null:t.orderDetails.receipt_date)("config",t.exampleOptions),a.zb(8),a.jc("formControl",t.addForm.controls.notes),a.zb(24),a.jc("ngForOf",t.addForm.controls.unload_detail.controls),a.zb(13),a.jc("formControl",t.addForm.controls.delivery_name),a.zb(8),a.jc("formControl",t.addForm.controls.delivery_phone),a.zb(9),a.jc("formControl",t.addForm.controls.delivery_vehicle_no),a.zb(12),a.jc("formControl",t.addForm.controls.receiver_name),a.zb(8),a.jc("formControl",t.addForm.controls.receiver_phone))},directives:[i.v,i.p,d.a,i.j,l.a,i.c,i.o,c.a,i.g,i.d,o.k,u.a,i.k,i.h],pipes:[o.d],styles:[".input_formarray[_ngcontent-%COMP%] {\n    width: 80%;\n  }"]}),p),m=r("Vr6k"),f=r("PCNd");r.d(t,"GenerateUnloadingModule",(function(){return _}));var h,y=[{path:":id",component:v}],_=((h=function e(){_classCallCheck(this,e)}).\u0275mod=a.Kb({type:h}),h.\u0275inj=a.Jb({factory:function(e){return new(e||h)},imports:[[o.b,n.i.forChild(y),l.b,i.l,m.a,f.a,i.s]]}),h)},xgIS:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));var o=r("HDdC"),n=r("DH7j"),i=r("n6bG"),a=r("lJxs");function b(e,t,r,d){return Object(i.a)(r)&&(d=r,r=void 0),d?b(e,t,r).pipe(Object(a.a)((function(e){return Object(n.a)(e)?d.apply(void 0,_toConsumableArray(e)):d(e)}))):new o.a((function(o){!function e(t,r,o,n,i){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var b=t;t.addEventListener(r,o,i),a=function(){return b.removeEventListener(r,o,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var d=t;t.on(r,o),a=function(){return d.off(r,o)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var l=t;t.addListener(r,o),a=function(){return l.removeListener(r,o)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var c=0,u=t.length;c<u;c++)e(t[c],r,o,n,i)}n.add(a)}(e,t,(function(e){o.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),o,r)}))}}}]);
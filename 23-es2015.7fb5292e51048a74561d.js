(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{"/SVk":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("fXoL");let o=(()=>{class e{constructor(e){this._el=e}onKeyDown(e){const t=e;-1!==[46,8,9,27,13].indexOf(t.keyCode)||65===t.keyCode&&(t.ctrlKey||t.metaKey)||88===t.keyCode&&(t.ctrlKey||t.metaKey)||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105||110===t.keyCode||190===t.keyCode)&&t.preventDefault()}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(n.l))},e.\u0275dir=n.Hb({type:e,selectors:[["","number",""]],hostBindings:function(e,t){1&e&&n.ac("keydown",(function(e){return t.onKeyDown(e)}))}}),e})()},HOh6:function(e,t,r){"use strict";var n=r("xgIS"),o=r("vkgz"),i=r("jtHE"),a=r("fXoL");r.d(t,"a",(function(){return s}));let s=(()=>{class e{constructor(e){this.host=e,this.submit$=Object(n.a)(this.element,"submit").pipe(Object(o.a)(()=>{!1===this.element.classList.contains("submitted")&&this.element.classList.add("submitted")}),function(e,t,r){let n;return n={bufferSize:1,windowTime:void 0,refCount:!1,scheduler:void 0},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:r,scheduler:n}){let o,a,s=0,l=!1,d=!1;return function(c){s++,o&&!l||(l=!1,o=new i.a(e,t,n),a=c.subscribe({next(e){o.next(e)},error(e){l=!0,o.error(e)},complete(){d=!0,a=void 0,o.complete()}}));const b=o.subscribe(this);this.add(()=>{s--,b.unsubscribe(),a&&!d&&r&&0===s&&(a.unsubscribe(),a=void 0,o=void 0)})}}(n))}())}get element(){return this.host.nativeElement}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(a.l))},e.\u0275dir=a.Hb({type:e,selectors:[["form"]]}),e})()},LhZO:function(e,t,r){"use strict";r.r(t);var n=r("ofXK"),o=r("tyNb"),i=r("3Pt+"),a=r("zzOR"),s=r("fXoL"),l=r("HNGx"),d=r("AwSQ"),c=r("HOh6"),b=r("Jvtu"),u=r("UaFz"),m=r("/SVk");function h(e,t){if(1&e){const e=s.Tb();s.Sb(0,"tr",34),s.Sb(1,"td"),s.Sb(2,"div",35),s.Dc(3),s.Rb(),s.Rb(),s.Sb(4,"td"),s.Dc(5),s.Rb(),s.Sb(6,"td"),s.Dc(7),s.Rb(),s.Sb(8,"td",23),s.Dc(9),s.Rb(),s.Sb(10,"td",23),s.Sb(11,"input",36),s.ac("input",(function(){s.vc(e);const r=t.index;return s.cc().setMissingQuantity(r)})),s.Rb(),s.Rb(),s.Sb(12,"td",23),s.Sb(13,"input",37),s.ac("input",(function(){s.vc(e);const r=t.index;return s.cc().setMissingQuantity(r)})),s.Rb(),s.Rb(),s.Sb(14,"td",23),s.Nb(15,"input",38),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit,r=t.index;s.jc("formGroupName",r),s.zb(3),s.Ec(r+1),s.zb(2),s.Fc(" ",null==e?null:null==e.value?null:e.value.sku_no," "),s.zb(2),s.Fc(" ",null==e?null:null==e.value?null:e.value.product_name," "),s.zb(2),s.Fc(" ",null==e?null:null==e.value?null:e.value.order_qty," ")}}let p=(()=>{class e{constructor(e,t,r,n,o,s){this.activatedRoute=e,this.unloadService=t,this.location=r,this.fb=n,this.dataService=o,this.router=s,this.exampleOptions={defaultDate:new Date,dateFormat:a.a,noCalendar:!0},this.orderDetails={},this.productList=[],this.date_format="M/d/yy",this.addForm=this.fb.group({delivery_name:[null,i.t.compose([i.t.required])],delivery_phone:[null,i.t.compose([i.t.required])],delivery_vehicle_no:[null,i.t.compose([i.t.required])],receiver_name:[null,i.t.compose([i.t.required])],receiver_phone:[null,i.t.compose([i.t.required])],notes:[null],unload_detail:this.fb.array([])}),this.activatedRoute.snapshot.paramMap.get("id")&&(this.viewId=this.activatedRoute.snapshot.paramMap.get("id")),this.getOrderDetails()}ngOnInit(){this.dataService.currentCompany.subscribe(e=>{e&&(this.timezone=String(e.timezone.format),this.time_format=e.time_format.label,this.date_format=e.date_format.label,this.currentCompany=e)}),this.getObject()}back(){this.location.back()}getOrderDetails(){this.subscription=this.dataService.OrderDetails.subscribe(e=>{e&&(this.objectArray=e)})}getObject(){this.unloadService.getUnloadReportsDetails(this.viewId).subscribe(e=>{e.success?(this.orderDetails=e.data.order_detail,this.productList=e.data.product,this.setData()):(this.orderDetails={},this.productList=[])},e=>{this.orderDetails={},this.productList=[]})}setData(){if(this.addForm.patchValue({notes:this.orderDetails.notes,delivery_name:this.orderDetails.delivery_name,delivery_phone:this.orderDetails.delivery_phone,delivery_vehicle_no:this.orderDetails.delivery_vehicle_no,receiver_name:this.orderDetails.receiver_name,receiver_phone:this.orderDetails.receiver_phone}),this.productList.length>0){const e=this.addForm.get("unload_detail");for(let t=0;t<=e.length+1;t++)e.removeAt(t);this.productList.forEach((t,r)=>{e.push(this.fb.group({unload_detail_id:t.unload_detail_id,sku_no:t.sku_no,product_name:t.product_name,order_qty:t.order_qty,received_qty:t.received_qty,missing_qty:t.missing_qty,damaged_qty:t.damaged_qty}))})}}submitForm(e){if(e.valid){this.showLoader=!0;const t=new FormData;t.append("delivery_name",e.value.delivery_name),t.append("delivery_phone",e.value.delivery_phone),t.append("delivery_vehicle_no",e.value.delivery_vehicle_no),t.append("receiver_name",e.value.receiver_name),t.append("receiver_phone",e.value.receiver_phone),t.append("unload_detail",JSON.stringify(e.value.unload_detail)),t.append("notes",e.value.notes?e.value.notes:""),this.unloadService.getUnloadSubmitReports(this.viewId,t).subscribe(e=>{this.showLoader=!1,e.success&&this.back()},e=>{this.showLoader=!1})}}addNewRow(){this.addForm.get("unload_detail").push(this.initRows())}initRows(){return new i.i({unload_detail_id:new i.f(""),sku_no:new i.f(""),product_name:new i.f(""),order_qty:new i.f(0,i.t.compose([i.t.required])),received_qty:new i.f(0,i.t.compose([i.t.required])),missing_qty:new i.f(0,i.t.compose([i.t.required])),damaged_qty:new i.f(0,i.t.compose([i.t.required]))})}setMissingQuantity(e){const t=this.addForm.controls.unload_detail.at(e),r=t.value.damaged_qty,n=t.value.received_qty,o=t.value.order_qty,i=Number(o)-(Number(n)+Number(r))>0?Number(o)-(Number(n)+Number(r)):0;t.controls.missing_qty.setValue(i)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(o.a),s.Mb(l.a),s.Mb(n.h),s.Mb(i.e),s.Mb(d.a),s.Mb(o.e))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-generate-unloading"]],decls:119,vars:16,consts:[[1,"container-fluid"],[1,"page-header","border-b"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"card"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"row","mt-3"],[1,"col-7","pl-3"],[1,"col-6"],[1,"form-group"],[1,"control-label","text-md-right"],[1,""],["type","text","disabled","",1,"form-control",3,"value"],[1,"date-picker"],["disabled","",3,"setDate","config"],[1,"date-picker-icon"],[1,"fa","fa-calendar"],["rows","2",1,"form-control",3,"formControl"],[1,"row","mt-4"],[1,"table-responsive-md","mt-3"],[1,"table"],[1,"text-center"],["formArrayName","unload_detail"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"border","border-left-0","border-right-0","border-bottom-0","pt-4","pb-2"],[1,"col-md-6"],["type","text","placeholder","",1,"form-control",3,"formControl"],["number","","type","text","placeholder","",1,"form-control",3,"formControl"],[1,"row","mt-2"],[1,"text-right","border-top","py-4","mt-5","card-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-secondary","ml-2"],[3,"formGroupName"],[1,"p-1"],["type","text","formControlName","received_qty",1,"input_formarray","form-control",3,"input"],["type","text","formControlName","damaged_qty",1,"input_formarray","form-control",3,"input"],["type","text","formControlName","missing_qty","disabled","",1,"input_formarray","form-control"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"h2",4),s.Dc(5),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(6,"div",5),s.Sb(7,"form",6),s.ac("ngSubmit",(function(){return t.submitForm(t.addForm)})),s.Sb(8,"div",7),s.Sb(9,"div",8),s.Sb(10,"div",9),s.Sb(11,"div",2),s.Sb(12,"div",10),s.Sb(13,"div",11),s.Sb(14,"label",12),s.Dc(15,"PO Date "),s.Sb(16,"em"),s.Dc(17,"*"),s.Rb(),s.Rb(),s.Sb(18,"div",13),s.Nb(19,"input",14),s.dc(20,"date"),s.Rb(),s.Rb(),s.Rb(),s.Sb(21,"div",10),s.Sb(22,"div",11),s.Sb(23,"label",12),s.Dc(24,"Date of Receipt "),s.Sb(25,"em"),s.Dc(26,"*"),s.Rb(),s.Rb(),s.Sb(27,"div",15),s.Nb(28,"ng2-flatpickr",16),s.Sb(29,"span",17),s.Nb(30,"span",18),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(31,"div",2),s.Sb(32,"div",3),s.Sb(33,"div",11),s.Sb(34,"label",12),s.Dc(35,"Notes"),s.Rb(),s.Nb(36,"textarea",19),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(37,"div",20),s.Sb(38,"div",3),s.Sb(39,"h5"),s.Dc(40,"Items"),s.Rb(),s.Sb(41,"div",21),s.Sb(42,"table",22),s.Sb(43,"thead"),s.Sb(44,"tr"),s.Sb(45,"th"),s.Dc(46,"No."),s.Rb(),s.Sb(47,"th"),s.Dc(48,"SKU no"),s.Rb(),s.Sb(49,"th"),s.Dc(50,"Product"),s.Rb(),s.Sb(51,"th",23),s.Dc(52,"Order Qty"),s.Rb(),s.Sb(53,"th",23),s.Dc(54,"Receive Qty"),s.Rb(),s.Sb(55,"th",23),s.Dc(56,"Damaged Qty "),s.Rb(),s.Sb(57,"th",23),s.Dc(58,"Missing Qty"),s.Rb(),s.Rb(),s.Rb(),s.Sb(59,"tbody",24),s.Bc(60,h,16,5,"tr",25),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(61,"div",20),s.Sb(62,"div",3),s.Sb(63,"div",26),s.Sb(64,"div",2),s.Sb(65,"div",27),s.Sb(66,"h5"),s.Dc(67,"Delivery By"),s.Rb(),s.Sb(68,"div",8),s.Sb(69,"div",27),s.Sb(70,"div",11),s.Sb(71,"label",12),s.Dc(72,"Name "),s.Sb(73,"em"),s.Dc(74,"*"),s.Rb(),s.Rb(),s.Sb(75,"div",13),s.Nb(76,"input",28),s.Rb(),s.Rb(),s.Rb(),s.Sb(77,"div",27),s.Sb(78,"div",11),s.Sb(79,"label",12),s.Dc(80,"Phone No. "),s.Sb(81,"em"),s.Dc(82,"*"),s.Rb(),s.Rb(),s.Sb(83,"div",13),s.Nb(84,"input",29),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(85,"div",30),s.Sb(86,"div",27),s.Sb(87,"div",11),s.Sb(88,"label",12),s.Dc(89,"Vehicle No. "),s.Sb(90,"em"),s.Dc(91,"*"),s.Rb(),s.Rb(),s.Sb(92,"div",13),s.Nb(93,"input",28),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(94,"div",27),s.Sb(95,"h5"),s.Dc(96,"Received By"),s.Rb(),s.Sb(97,"div",8),s.Sb(98,"div",27),s.Sb(99,"div",11),s.Sb(100,"label",12),s.Dc(101,"Name "),s.Sb(102,"em"),s.Dc(103,"*"),s.Rb(),s.Rb(),s.Sb(104,"div",13),s.Nb(105,"input",28),s.Rb(),s.Rb(),s.Rb(),s.Sb(106,"div",27),s.Sb(107,"div",11),s.Sb(108,"label",12),s.Dc(109,"Phone No. "),s.Sb(110,"em"),s.Dc(111,"*"),s.Rb(),s.Rb(),s.Sb(112,"div",13),s.Nb(113,"input",29),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(114,"div",31),s.Sb(115,"button",32),s.ac("click",(function(){return t.back()})),s.Dc(116,"Cancel"),s.Rb(),s.Sb(117,"button",33),s.Dc(118,"Submit"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.zb(5),s.Fc("Order No : ",null==t.objectArray?null:t.objectArray.po_no," Unloading - Submit Report "),s.zb(2),s.jc("formGroup",t.addForm),s.zb(12),s.jc("value",s.gc(20,12,null==t.orderDetails?null:t.orderDetails.po_date,t.date_format,t.timezone)),s.zb(9),s.jc("setDate",null==t.orderDetails?null:t.orderDetails.receipt_date)("config",t.exampleOptions),s.zb(8),s.jc("formControl",t.addForm.controls.notes),s.zb(24),s.jc("ngForOf",t.addForm.controls.unload_detail.controls),s.zb(16),s.jc("formControl",t.addForm.controls.delivery_name),s.zb(8),s.jc("formControl",t.addForm.controls.delivery_phone),s.zb(9),s.jc("formControl",t.addForm.controls.delivery_vehicle_no),s.zb(12),s.jc("formControl",t.addForm.controls.receiver_name),s.zb(8),s.jc("formControl",t.addForm.controls.receiver_phone))},directives:[i.v,i.p,c.a,i.j,b.a,i.c,i.o,u.a,i.g,i.d,n.k,m.a,i.k,i.h],pipes:[n.d],styles:[".input_formarray[_ngcontent-%COMP%] {\n    width: 80%;\n  }"]}),e})();var v=r("Vr6k"),f=r("PCNd");r.d(t,"GenerateUnloadingModule",(function(){return _}));const y=[{path:":id",component:p}];let _=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[n.b,o.i.forChild(y),b.b,i.l,v.a,f.a,i.s]]}),e})()},PCNd:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("ofXK"),o=r("fXoL");let i=(()=>{class e{}return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[n.b]]}),e})()},UaFz:function(e,t,r){"use strict";var n=r("fXoL");let o=(()=>{class e{constructor(e){this.cdr=e,this._hide=!0}set text(e){e!==this._text&&(this._text=e,this._hide=!e,this.cdr.detectChanges())}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(n.h))},e.\u0275cmp=n.Gb({type:e,selectors:[["app-control-error"]],inputs:{text:"text"},decls:1,vars:3,consts:[[1,"help","is-danger",3,"innerHTML"]],template:function(e,t){1&e&&n.Nb(0,"p",0),2&e&&(n.Eb("hide",t._hide),n.jc("innerHTML",t._text,n.wc))},encapsulation:2,changeDetection:0}),e})();var i=r("EY2u"),a=r("VRyK");const s={first_name:{required:"* Please enter first name"},last_name:{required:"* Please enter last name"},email:{required:"* Please enter email",email:"* Please enter valid email",validateEmail:"* Please enter valid email"},phone_number:{required:"Please enter phone number",minlength:"Please enter at least 8 digits",maxlength:"Please enter at least 18 digits"},password:{required:"* Please enter password",pattern:"* Password must contains at least 6 characters"},confirm_password:{required:"* Please enter confirm password",validatePassword:"* Your Password is not matched"},tree_level_name:{required:"* Please enter tree level name"},max_node:{required:"* Please enter max node"},tree_order:{required:"* Please enter tree order"},tree_name:{required:"* Please enter tree name"},tree_level_id:{required:"* Please enter tree level"},user_type:{required:"* Please enter user type"},wallet_name:{required:"* Please enter wallet name"},currency_id:{required:"* Please select currency"},wallet_type:{required:"* Please select wallet type"},otp:{required:"* Please enter OTP"},login_pin:{required:"* Please enter PIN",maxlength:"Pin Max 4 Digit",minlength:"Please enter at least 4 digits"},bank_name:{required:"* Please enter bank name"},bank_code:{required:"* Please enter code",maxlength:"Code Max 4 Digit",minlength:"Please enter at least 4 digits"},amount:{required:"* Please enter amount",max:"amount max balance"},sms:{required:"* Please enter content"},webhook:{required:"* Please enter content"},device_number:{required:"* Please enter device number"},name:{required:"* Please enter name"},location:{required:"* Please enter location"},group_id:{required:"* Please select group"}};let l=(()=>{class e{constructor(e){this.vcr=e}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(n.N))},e.\u0275dir=n.Hb({type:e,selectors:[["","controlErrorContainer",""]]}),e})();var d=r("HOh6"),c=r("3Pt+");r.d(t,"a",(function(){return b}));let b=(()=>{class e{constructor(e,t,r,n,o){this.vcr=e,this.resolver=t,this.form=n,this.controlDir=o,this.customErrors={},this.container=r?r.vcr:e,this.submit$=this.form?this.form.submit$:i.a}ngOnInit(){this.control&&this.control.valueChanges&&Object(a.a)(this.control.valueChanges,this.submit$).subscribe(e=>{const t=this.control.errors;if(t){const e=this.getFormControlName(this.control),r=Object.keys(t)[0],n=s[e];null!=n&&""!==n&&this.setError(n[r])}else this.ref&&this.setError(null)})}getFormControlName(e){const t=e.parent.controls;return Object.keys(t).find(r=>e===t[r])||null}get control(){return this.controlDir.control}setError(e){if(!this.ref){const e=this.resolver.resolveComponentFactory(o);this.ref=this.container.createComponent(e)}this.ref.instance.text=e}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(n.Mb(n.N),n.Mb(n.j),n.Mb(l,8),n.Mb(d.a,9),n.Mb(c.n))},e.\u0275dir=n.Hb({type:e,selectors:[["","formControl",""],["","formControlName",""]],inputs:{customErrors:"customErrors"}}),e})()},Vr6k:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("ofXK"),o=r("3Pt+"),i=r("fXoL");let a=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},imports:[[n.b,o.l]]}),e})()},xgIS:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("HDdC"),o=r("DH7j"),i=r("n6bG"),a=r("lJxs");function s(e,t,r,l){return Object(i.a)(r)&&(l=r,r=void 0),l?s(e,t,r).pipe(Object(a.a)(e=>Object(o.a)(e)?l(...e):l(e))):new n.a(n=>{!function e(t,r,n,o,i){let a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){const e=t;t.addEventListener(r,n,i),a=()=>e.removeEventListener(r,n,i)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){const e=t;t.on(r,n),a=()=>e.off(r,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){const e=t;t.addListener(r,n),a=()=>e.removeListener(r,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let a=0,s=t.length;a<s;a++)e(t[a],r,n,o,i)}o.add(a)}(e,t,(function(e){n.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),n,r)})}}}]);
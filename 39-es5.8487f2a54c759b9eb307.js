function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{X8pz:function(e,t,a){"use strict";a.r(t);var o=a("ofXK"),i=a("tyNb"),r=a("3Pt+"),n=a("Lw2Y"),c=a("FasR"),d=a("zzOR"),s=a("fXoL"),b=a("5eHb"),l=a("HNGx"),u=a("c8VH"),p=a("AwSQ"),h=a("Jvtu"),f=a("LPFR");function m(e,t){if(1&e&&(s.Sb(0,"div",19),s.Sb(1,"div",20),s.Sb(2,"div",2),s.Sb(3,"div",21),s.Sb(4,"div",22),s.Sb(5,"label",23),s.Dc(6,"PO Date "),s.Sb(7,"em"),s.Dc(8,"*"),s.Rb(),s.Rb(),s.Sb(9,"div",24),s.Nb(10,"input",25),s.dc(11,"date"),s.Rb(),s.Rb(),s.Rb(),s.Sb(12,"div",21),s.Sb(13,"div",22),s.Sb(14,"label",23),s.Dc(15,"Date of Receipt"),s.Rb(),s.Sb(16,"div",26),s.Nb(17,"ng2-flatpickr",27),s.Sb(18,"span",28),s.Nb(19,"span",29),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e){var a=s.cc();s.zb(10),s.kc("value",s.gc(11,3,a.addForm.value.po_date,a.date_format,a.timezone)),s.zb(7),s.jc("formControl",a.addForm.controls.receipt_date)("config",a.exampleOptions)}}function v(e,t){if(1&e){var a=s.Tb();s.Qb(0),s.Sb(1,"div",19),s.Sb(2,"div",3),s.Sb(3,"app-table-list",30),s.ac("checkBoxSelectEvent",(function(e){return s.vc(a),s.cc().checkBoxSelectEvent(e)}))("reloadEvent",(function(){return s.vc(a),s.cc().onReloadEvent()})),s.Rb(),s.Rb(),s.Rb(),s.Pb()}if(2&e){var o=s.cc();s.zb(3),s.jc("headerData",o.headerData)("rawData",o.productList)}}var S,g=function(e){return{"qt-loader qt-loader-mini qt-loader-left":e}},R=((S=function(){function e(t,a,o,i,n,c,s,b){_classCallCheck(this,e),this.location=t,this.toastr=a,this.unloadService=o,this.paginationService=i,this.activatedRoute=n,this.dataService=c,this.fb=s,this.router=b,this.PageTitle="Genrate Unloading",this.objectDetails=!1,this.productList=[],this.productItems=[],this.headerData=[],this.date_format="M/d/yy",this.showLoader=!1,this.formErrors={apierror:null},this.exampleOptions={defaultDate:new Date,dateFormat:d.a},this.activatedRoute.snapshot.paramMap.get("id")&&(this.orderId=this.activatedRoute.snapshot.paramMap.get("id"),this.orderId&&this.getUnloadGenerateListById()),this.addForm=this.fb.group({receipt_date:[null,r.t.compose([r.t.required])],po_date:[null,r.t.compose([r.t.required])]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.dataService.currentCompany.subscribe((function(t){t&&(e.timezone=t.timezone.label,e.time_format=t.time_format.label,e.date_format=t.date_format.label,e.currentCompany=t)})),this.addForm.patchValue({receipt_date:new Date}),this.setHeaderData()}},{key:"setHeaderData",value:function(){this.headerData.push(new c.b({class:"align-items-center d-flex",key:"product_id"}),new c.i({label:"SKU",key:"sku_no"}),new c.i({label:"Product",key:"product_name"}),new c.i({label:"Order Quantity",key:"order_quantity"}))}},{key:"back",value:function(){this.location.back()}},{key:"getUnloadGenerateListById",value:function(){var e=this;this.unloadService.getUnloadGenerateListById(this.orderId).subscribe((function(t){t.success?(e.objectDetails=t.data.po_detail?t.data.po_detail:{},e.productList=t.data.product_list?t.data.product_list:[],e.setData()):(e.objectDetails=null,e.productList=[],e.pagination=null)}))}},{key:"setData",value:function(){this.searchText=this.objectDetails.po_no,this.addForm.patchValue({po_date:this.objectDetails.po_date,receipt_date:new Date})}},{key:"submitForm",value:function(e){var t=this;if(e.valid){this.showLoader=!0;var a=new FormData;a.append("receipt_date",n.a.changedateFormate(e.value.receipt_date[0])),a.append("po_id",this.orderId),a.append("supplier_id",this.objectDetails.supplier_id),a.append("to_details",this.objectDetails.client_id),a.append("product",JSON.stringify(this.productItems)),this.isEditing||this.unloadService.addUnloadGenerate(a).subscribe((function(e){setTimeout((function(){t.showLoader=!1}),700),e.success?t.back():e.error.filter((function(e){e.hasOwnProperty("product")&&t.toastr.error("","Please Select a Product...!")}))}),(function(e){t.showLoader=!1}))}}},{key:"getPage",value:function(e){this.currentPage=e}},{key:"searchObject",value:function(){console.log("searchObject",this.searchText)}},{key:"onReloadEvent",value:function(){this.getUnloadGenerateListById()}},{key:"checkBoxSelectEvent",value:function(e){var t=this;this.productItems=[],e&&e.length>0&&e.filter((function(e){var a=new Object;a.product_id=e.product_id,a.order_qty=e.order_quantity,a.sku_no=e.sku_no,a.product_name=e.product_name,t.productItems.push(a)}))}}]),e}()).\u0275fac=function(e){return new(e||S)(s.Mb(o.h),s.Mb(b.b),s.Mb(l.a),s.Mb(u.a),s.Mb(i.a),s.Mb(p.a),s.Mb(r.e),s.Mb(i.e))},S.\u0275cmp=s.Gb({type:S,selectors:[["app-generate"]],decls:32,vars:9,consts:[[1,"container-fluid"],[1,"page-header"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"card"],[1,"card-body"],[1,"form-group","row"],[1,"control-label","text-md-right","col-md-3","mt-2"],[1,"d-flex"],["type","text","placeholder","",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-primary","ml-2",3,"click"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],["class","row mt-3",4,"ngIf"],[1,"row","mt-4"],[4,"ngIf"],[1,"text-right","border-top","pt-4","mt-5","mb-3"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-secondary","ml-2",3,"ngClass","disabled"],[1,"row","mt-3"],[1,"col-7","pl-3"],[1,"col-6"],[1,"form-group"],[1,"control-label","text-md-right"],[1,""],["type","text","placeholder","","disabled","",1,"form-control",3,"value"],[1,"date-picker"],[3,"formControl","config"],[1,"date-picker-icon"],[1,"fa","fa-calendar"],[3,"headerData","rawData","checkBoxSelectEvent","reloadEvent"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"h2",4),s.Dc(5),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(6,"div",5),s.Sb(7,"div",6),s.Sb(8,"div",7),s.Sb(9,"label",8),s.Dc(10,"Order Number "),s.Sb(11,"em"),s.Dc(12,"*"),s.Rb(),s.Rb(),s.Sb(13,"div",9),s.Sb(14,"input",10),s.ac("ngModelChange",(function(e){return t.searchText=e})),s.Rb(),s.Sb(15,"button",11),s.ac("click",(function(){return t.searchObject()})),s.Dc(16,"Search"),s.Rb(),s.Rb(),s.Rb(),s.Sb(17,"form",12),s.ac("ngSubmit",(function(){return t.submitForm(t.addForm)})),s.Bc(18,m,20,7,"div",13),s.Sb(19,"div",14),s.Sb(20,"div",3),s.Sb(21,"h5"),s.Dc(22,"Product"),s.Rb(),s.Rb(),s.Rb(),s.Sb(23,"div"),s.Bc(24,v,4,2,"ng-container",15),s.Sb(25,"div",2),s.Sb(26,"div",3),s.Sb(27,"div",16),s.Sb(28,"button",17),s.ac("click",(function(){return t.back()})),s.Dc(29,"Cancel"),s.Rb(),s.Sb(30,"button",18),s.Dc(31,"Generate"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.zb(5),s.Ec(t.PageTitle),s.zb(9),s.jc("ngModel",t.searchText),s.zb(3),s.jc("formGroup",t.addForm),s.zb(1),s.jc("ngIf",t.objectDetails),s.zb(6),s.jc("ngIf",t.productList.length>0),s.zb(6),s.jc("ngClass",s.nc(7,g,t.showLoader))("disabled",t.showLoader))},directives:[r.c,r.o,r.q,r.v,r.p,r.j,o.l,o.j,h.a,r.g,f.a],pipes:[o.d],encapsulation:2}),S),_=a("OTx7");a.d(t,"GenerateModule",(function(){return w}));var y,k=[{path:"",component:R},{path:":id",component:R}],w=((y=function e(){_classCallCheck(this,e)}).\u0275mod=s.Kb({type:y}),y.\u0275inj=s.Jb({factory:function(e){return new(e||y)},imports:[[o.b,h.b,r.l,r.s,_.a,i.i.forChild(k)]]}),y)}}]);
function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"/SVk":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r("fXoL"),i=function(){var e=function(){function e(t){_classCallCheck(this,e),this._el=t}return _createClass(e,[{key:"onKeyDown",value:function(e){var t=e;-1!==[46,8,9,27,13].indexOf(t.keyCode)||65===t.keyCode&&(t.ctrlKey||t.metaKey)||88===t.keyCode&&(t.ctrlKey||t.metaKey)||t.keyCode>=35&&t.keyCode<=39||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105||110===t.keyCode||190===t.keyCode)&&t.preventDefault()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(n.Mb(n.l))},e.\u0275dir=n.Hb({type:e,selectors:[["","number",""]],hostBindings:function(e,t){1&e&&n.ac("keydown",(function(e){return t.onKeyDown(e)}))}}),e}()},HOh6:function(e,t,r){"use strict";var n=r("xgIS"),i=r("vkgz"),o=r("jtHE"),a=r("fXoL");r.d(t,"a",(function(){return s}));var l,s=((l=function(){function e(t){var r,a=this;_classCallCheck(this,e),this.host=t,this.submit$=Object(n.a)(this.element,"submit").pipe(Object(i.a)((function(){!1===a.element.classList.contains("submitted")&&a.element.classList.add("submitted")})),(r={bufferSize:1,windowTime:void 0,refCount:!1,scheduler:void 0},function(e){return e.lift(function(e){var t,r,n=e.bufferSize,i=void 0===n?Number.POSITIVE_INFINITY:n,a=e.windowTime,l=void 0===a?Number.POSITIVE_INFINITY:a,s=e.refCount,c=e.scheduler,u=0,d=!1,b=!1;return function(e){u++,t&&!d||(d=!1,t=new o.a(i,l,c),r=e.subscribe({next:function(e){t.next(e)},error:function(e){d=!0,t.error(e)},complete:function(){b=!0,r=void 0,t.complete()}}));var n=t.subscribe(this);this.add((function(){u--,n.unsubscribe(),r&&!b&&s&&0===u&&(r.unsubscribe(),r=void 0,t=void 0)}))}}(r))}))}return _createClass(e,[{key:"element",get:function(){return this.host.nativeElement}}]),e}()).\u0275fac=function(e){return new(e||l)(a.Mb(a.l))},l.\u0275dir=a.Hb({type:l,selectors:[["form"]]}),l)},LhZO:function(e,t,r){"use strict";r.r(t);var n=r("ofXK"),i=r("tyNb"),o=r("3Pt+"),a=r("zzOR"),l=r("fXoL"),s=r("HNGx"),c=r("AwSQ"),u=r("HOh6"),d=r("Jvtu"),b=r("UaFz"),f=r("/SVk");function m(e,t){if(1&e){var r=l.Tb();l.Sb(0,"tr",33),l.Sb(1,"td"),l.Sb(2,"div",34),l.Dc(3),l.Rb(),l.Rb(),l.Sb(4,"td"),l.Dc(5),l.Rb(),l.Sb(6,"td"),l.Dc(7),l.Rb(),l.Sb(8,"td",22),l.Dc(9),l.Rb(),l.Sb(10,"td",22),l.Sb(11,"input",35),l.ac("input",(function(){l.vc(r);var e=t.index;return l.cc().setMissingQuantity(e)})),l.Rb(),l.Rb(),l.Sb(12,"td",22),l.Sb(13,"input",36),l.ac("input",(function(){l.vc(r);var e=t.index;return l.cc().setMissingQuantity(e)})),l.Rb(),l.Rb(),l.Sb(14,"td",22),l.Nb(15,"input",37),l.Rb(),l.Rb()}if(2&e){var n=t.$implicit,i=t.index;l.jc("formGroupName",i),l.zb(3),l.Ec(i+1),l.zb(2),l.Fc(" ",null==n?null:null==n.value?null:n.value.sku_no," "),l.zb(2),l.Fc(" ",null==n?null:null==n.value?null:n.value.product_name," "),l.zb(2),l.Fc(" ",null==n?null:null==n.value?null:n.value.order_qty," ")}}var v,p=((v=function(){function e(t,r,n,i,l,s){_classCallCheck(this,e),this.activatedRoute=t,this.unloadService=r,this.location=n,this.fb=i,this.dataService=l,this.router=s,this.exampleOptions={defaultDate:new Date,dateFormat:a.a,noCalendar:!0},this.orderDetails={},this.productList=[],this.date_format="M/d/yy",this.addForm=this.fb.group({delivery_name:[null,o.t.compose([o.t.required])],delivery_phone:[null,o.t.compose([o.t.required])],delivery_vehicle_no:[null,o.t.compose([o.t.required])],receiver_name:[null,o.t.compose([o.t.required])],receiver_phone:[null,o.t.compose([o.t.required])],notes:[null],unload_detail:this.fb.array([])}),this.activatedRoute.snapshot.paramMap.get("id")&&(this.viewId=this.activatedRoute.snapshot.paramMap.get("id")),this.getOrderDetails()}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.dataService.currentCompany.subscribe((function(t){t&&(e.timezone=t.timezone.label,e.time_format=t.time_format.label,e.date_format=t.date_format.label,e.currentCompany=t)})),this.getObject()}},{key:"back",value:function(){this.location.back()}},{key:"getOrderDetails",value:function(){var e=this;this.subscription=this.dataService.OrderDetails.subscribe((function(t){t&&(e.objectArray=t)}))}},{key:"getObject",value:function(){var e=this;this.unloadService.getUnloadReportsDetails(this.viewId).subscribe((function(t){t.success?(e.orderDetails=t.data.order_detail,e.productList=t.data.product,e.setData()):(e.orderDetails={},e.productList=[])}),(function(t){e.orderDetails={},e.productList=[]}))}},{key:"setData",value:function(){var e=this;if(this.addForm.patchValue({notes:this.orderDetails.notes,delivery_name:this.orderDetails.delivery_name,delivery_phone:this.orderDetails.delivery_phone,delivery_vehicle_no:this.orderDetails.delivery_vehicle_no,receiver_name:this.orderDetails.receiver_name,receiver_phone:this.orderDetails.receiver_phone}),this.productList.length>0){for(var t=this.addForm.get("unload_detail"),r=0;r<=t.length+1;r++)t.removeAt(r);this.productList.forEach((function(r,n){t.push(e.fb.group({unload_detail_id:r.unload_detail_id,sku_no:r.sku_no,product_name:r.product_name,order_qty:r.order_qty,received_qty:r.received_qty,missing_qty:r.missing_qty,damaged_qty:r.damaged_qty}))}))}}},{key:"submitForm",value:function(e){var t=this;if(e.valid){this.showLoader=!0;var r=new FormData;r.append("delivery_name",e.value.delivery_name),r.append("delivery_phone",e.value.delivery_phone),r.append("delivery_vehicle_no",e.value.delivery_vehicle_no),r.append("receiver_name",e.value.receiver_name),r.append("receiver_phone",e.value.receiver_phone),r.append("unload_detail",JSON.stringify(e.value.unload_detail)),r.append("notes",e.value.notes?e.value.notes:""),this.unloadService.getUnloadSubmitReports(this.viewId,r).subscribe((function(e){t.showLoader=!1,e.success&&t.back()}),(function(e){t.showLoader=!1}))}}},{key:"addNewRow",value:function(){this.addForm.get("unload_detail").push(this.initRows())}},{key:"initRows",value:function(){return new o.i({unload_detail_id:new o.f(""),sku_no:new o.f(""),product_name:new o.f(""),order_qty:new o.f(0,o.t.compose([o.t.required])),received_qty:new o.f(0,o.t.compose([o.t.required])),missing_qty:new o.f(0,o.t.compose([o.t.required])),damaged_qty:new o.f(0,o.t.compose([o.t.required]))})}},{key:"setMissingQuantity",value:function(e){var t=this.addForm.controls.unload_detail.at(e),r=t.value.damaged_qty,n=t.value.received_qty,i=t.value.order_qty,o=Number(i)-(Number(n)+Number(r))>0?Number(i)-(Number(n)+Number(r)):0;t.controls.missing_qty.setValue(o)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||v)(l.Mb(i.a),l.Mb(s.a),l.Mb(n.h),l.Mb(o.e),l.Mb(c.a),l.Mb(i.e))},v.\u0275cmp=l.Gb({type:v,selectors:[["app-generate-unloading"]],decls:117,vars:16,consts:[[1,"container-fluid"],[1,"page-header","border-b"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"card"],["role","form",1,"form-horizontal","pb-4",3,"formGroup","ngSubmit"],[1,"row","mt-3"],[1,"col-7","pl-3"],[1,"col-6"],[1,"form-group"],[1,"control-label","text-md-right"],[1,""],["type","text","disabled","",1,"form-control",3,"value"],[1,"date-picker"],["disabled","",3,"setDate","config"],[1,"date-picker-icon"],[1,"fa","fa-calendar"],["rows","2",1,"form-control",3,"formControl"],[1,"row","mt-4"],[1,"table-responsive-md","mt-3"],[1,"table"],[1,"text-center"],["formArrayName","unload_detail"],[3,"formGroupName",4,"ngFor","ngForOf"],[1,"row","mt-4","border","border-left-0","border-right-0","pt-4","pb-2"],[1,"col-md-6"],["type","text","placeholder","",1,"form-control",3,"formControl"],["number","","type","text","placeholder","",1,"form-control",3,"formControl"],[1,"row","mt-2"],[1,"text-right"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-secondary","ml-2"],[3,"formGroupName"],[1,"p-1"],["type","text","formControlName","received_qty",1,"input_formarray","form-control",3,"input"],["type","text","formControlName","damaged_qty",1,"input_formarray","form-control",3,"input"],["type","text","formControlName","missing_qty","disabled","",1,"input_formarray","form-control"]],template:function(e,t){1&e&&(l.Sb(0,"div",0),l.Sb(1,"div",1),l.Sb(2,"div",2),l.Sb(3,"div",3),l.Sb(4,"h2",4),l.Dc(5),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(6,"div",5),l.Sb(7,"form",6),l.ac("ngSubmit",(function(){return t.submitForm(t.addForm)})),l.Sb(8,"div",7),l.Sb(9,"div",8),l.Sb(10,"div",2),l.Sb(11,"div",9),l.Sb(12,"div",10),l.Sb(13,"label",11),l.Dc(14,"PO Date "),l.Sb(15,"em"),l.Dc(16,"*"),l.Rb(),l.Rb(),l.Sb(17,"div",12),l.Nb(18,"input",13),l.dc(19,"date"),l.Rb(),l.Rb(),l.Rb(),l.Sb(20,"div",9),l.Sb(21,"div",10),l.Sb(22,"label",11),l.Dc(23,"Date of Receipt "),l.Sb(24,"em"),l.Dc(25,"*"),l.Rb(),l.Rb(),l.Sb(26,"div",14),l.Nb(27,"ng2-flatpickr",15),l.Sb(28,"span",16),l.Nb(29,"span",17),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(30,"div",2),l.Sb(31,"div",3),l.Sb(32,"div",10),l.Sb(33,"label",11),l.Dc(34,"Notes"),l.Rb(),l.Nb(35,"textarea",18),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(36,"div",19),l.Sb(37,"div",3),l.Sb(38,"h5"),l.Dc(39,"Items"),l.Rb(),l.Sb(40,"div",20),l.Sb(41,"table",21),l.Sb(42,"thead"),l.Sb(43,"tr"),l.Sb(44,"th"),l.Dc(45,"No."),l.Rb(),l.Sb(46,"th"),l.Dc(47,"SKU no"),l.Rb(),l.Sb(48,"th"),l.Dc(49,"Product"),l.Rb(),l.Sb(50,"th",22),l.Dc(51,"Order Qty"),l.Rb(),l.Sb(52,"th",22),l.Dc(53,"Receive Qty"),l.Rb(),l.Sb(54,"th",22),l.Dc(55,"Damaged Qty "),l.Rb(),l.Sb(56,"th",22),l.Dc(57,"Missing Qty"),l.Rb(),l.Rb(),l.Rb(),l.Sb(58,"tbody",23),l.Bc(59,m,16,5,"tr",24),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(60,"div",25),l.Sb(61,"div",26),l.Sb(62,"h5"),l.Dc(63,"Delivery By"),l.Rb(),l.Sb(64,"div",7),l.Sb(65,"div",26),l.Sb(66,"div",10),l.Sb(67,"label",11),l.Dc(68,"Name "),l.Sb(69,"em"),l.Dc(70,"*"),l.Rb(),l.Rb(),l.Sb(71,"div",12),l.Nb(72,"input",27),l.Rb(),l.Rb(),l.Rb(),l.Sb(73,"div",26),l.Sb(74,"div",10),l.Sb(75,"label",11),l.Dc(76,"Phone No. "),l.Sb(77,"em"),l.Dc(78,"*"),l.Rb(),l.Rb(),l.Sb(79,"div",12),l.Nb(80,"input",28),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(81,"div",29),l.Sb(82,"div",26),l.Sb(83,"div",10),l.Sb(84,"label",11),l.Dc(85,"Vehicle No. "),l.Sb(86,"em"),l.Dc(87,"*"),l.Rb(),l.Rb(),l.Sb(88,"div",12),l.Nb(89,"input",27),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(90,"div",26),l.Sb(91,"h5"),l.Dc(92,"Received By"),l.Rb(),l.Sb(93,"div",7),l.Sb(94,"div",26),l.Sb(95,"div",10),l.Sb(96,"label",11),l.Dc(97,"Name "),l.Sb(98,"em"),l.Dc(99,"*"),l.Rb(),l.Rb(),l.Sb(100,"div",12),l.Nb(101,"input",27),l.Rb(),l.Rb(),l.Rb(),l.Sb(102,"div",26),l.Sb(103,"div",10),l.Sb(104,"label",11),l.Dc(105,"Phone No. "),l.Sb(106,"em"),l.Dc(107,"*"),l.Rb(),l.Rb(),l.Sb(108,"div",12),l.Nb(109,"input",28),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(110,"div",7),l.Sb(111,"div",3),l.Sb(112,"div",30),l.Sb(113,"button",31),l.ac("click",(function(){return t.back()})),l.Dc(114,"Cancel"),l.Rb(),l.Sb(115,"button",32),l.Dc(116,"Submit"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&e&&(l.zb(5),l.Fc("Order No : ",null==t.objectArray?null:t.objectArray.po_no," Unloading - Submit Report "),l.zb(2),l.jc("formGroup",t.addForm),l.zb(11),l.jc("value",l.gc(19,12,null==t.orderDetails?null:t.orderDetails.po_date,t.date_format,t.timezone)),l.zb(9),l.jc("setDate",null==t.orderDetails?null:t.orderDetails.receipt_date)("config",t.exampleOptions),l.zb(8),l.jc("formControl",t.addForm.controls.notes),l.zb(24),l.jc("ngForOf",t.addForm.controls.unload_detail.controls),l.zb(13),l.jc("formControl",t.addForm.controls.delivery_name),l.zb(8),l.jc("formControl",t.addForm.controls.delivery_phone),l.zb(9),l.jc("formControl",t.addForm.controls.delivery_vehicle_no),l.zb(12),l.jc("formControl",t.addForm.controls.receiver_name),l.zb(8),l.jc("formControl",t.addForm.controls.receiver_phone))},directives:[o.v,o.p,u.a,o.j,d.a,o.c,o.o,b.a,o.g,o.d,n.k,f.a,o.k,o.h],pipes:[n.d],styles:[".input_formarray[_ngcontent-%COMP%] {\n    width: 80%;\n  }"]}),v),h=r("Vr6k"),y=r("PCNd");r.d(t,"GenerateUnloadingModule",(function(){return R}));var _,S=[{path:":id",component:p}],R=((_=function e(){_classCallCheck(this,e)}).\u0275mod=l.Kb({type:_}),_.\u0275inj=l.Jb({factory:function(e){return new(e||_)},imports:[[n.b,i.i.forChild(S),d.b,o.l,h.a,y.a,o.s]]}),_)},PCNd:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("ofXK"),i=r("fXoL"),o=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},imports:[[n.b]]}),e}()},UaFz:function(e,t,r){"use strict";var n,i,o=r("fXoL"),a=((n=function(){function e(t){_classCallCheck(this,e),this.cdr=t,this._hide=!0}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"text",set:function(e){e!==this._text&&(this._text=e,this._hide=!e,this.cdr.detectChanges())}}]),e}()).\u0275fac=function(e){return new(e||n)(o.Mb(o.h))},n.\u0275cmp=o.Gb({type:n,selectors:[["app-control-error"]],inputs:{text:"text"},decls:1,vars:3,consts:[[1,"help","is-danger",3,"innerHTML"]],template:function(e,t){1&e&&o.Nb(0,"p",0),2&e&&(o.Eb("hide",t._hide),o.jc("innerHTML",t._text,o.wc))},encapsulation:2,changeDetection:0}),n),l=r("EY2u"),s=r("VRyK"),c={first_name:{required:"* Please enter first name"},last_name:{required:"* Please enter last name"},email:{required:"* Please enter email",email:"* Please enter valid email",validateEmail:"* Please enter valid email"},phone_number:{required:"Please enter phone number",minlength:"Please enter at least 8 digits",maxlength:"Please enter at least 18 digits"},password:{required:"* Please enter password",pattern:"* Password must contains at least 6 characters"},confirm_password:{required:"* Please enter confirm password",validatePassword:"* Your Password is not matched"},tree_level_name:{required:"* Please enter tree level name"},max_node:{required:"* Please enter max node"},tree_order:{required:"* Please enter tree order"},tree_name:{required:"* Please enter tree name"},tree_level_id:{required:"* Please enter tree level"},user_type:{required:"* Please enter user type"},wallet_name:{required:"* Please enter wallet name"},currency_id:{required:"* Please select currency"},wallet_type:{required:"* Please select wallet type"},otp:{required:"* Please enter OTP"},login_pin:{required:"* Please enter PIN",maxlength:"Pin Max 4 Digit",minlength:"Please enter at least 4 digits"},bank_name:{required:"* Please enter bank name"},bank_code:{required:"* Please enter code",maxlength:"Code Max 4 Digit",minlength:"Please enter at least 4 digits"},amount:{required:"* Please enter amount",max:"amount max balance"},sms:{required:"* Please enter content"},webhook:{required:"* Please enter content"},device_number:{required:"* Please enter device number"},name:{required:"* Please enter name"},location:{required:"* Please enter location"},group_id:{required:"* Please select group"}},u=((i=function e(t){_classCallCheck(this,e),this.vcr=t}).\u0275fac=function(e){return new(e||i)(o.Mb(o.N))},i.\u0275dir=o.Hb({type:i,selectors:[["","controlErrorContainer",""]]}),i),d=r("HOh6"),b=r("3Pt+");r.d(t,"a",(function(){return m}));var f,m=((f=function(){function e(t,r,n,i,o){_classCallCheck(this,e),this.vcr=t,this.resolver=r,this.form=i,this.controlDir=o,this.customErrors={},this.container=n?n.vcr:t,this.submit$=this.form?this.form.submit$:l.a}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.control&&this.control.valueChanges&&Object(s.a)(this.control.valueChanges,this.submit$).subscribe((function(t){var r=e.control.errors;if(r){var n=e.getFormControlName(e.control),i=Object.keys(r)[0],o=c[n];null!=o&&""!==o&&e.setError(o[i])}else e.ref&&e.setError(null)}))}},{key:"getFormControlName",value:function(e){var t=e.parent.controls;return Object.keys(t).find((function(r){return e===t[r]}))||null}},{key:"setError",value:function(e){if(!this.ref){var t=this.resolver.resolveComponentFactory(a);this.ref=this.container.createComponent(t)}this.ref.instance.text=e}},{key:"ngOnDestroy",value:function(){}},{key:"control",get:function(){return this.controlDir.control}}]),e}()).\u0275fac=function(e){return new(e||f)(o.Mb(o.N),o.Mb(o.j),o.Mb(u,8),o.Mb(d.a,9),o.Mb(b.n))},f.\u0275dir=o.Hb({type:f,selectors:[["","formControl",""],["","formControlName",""]],inputs:{customErrors:"customErrors"}}),f)},Vr6k:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("ofXK"),i=r("3Pt+"),o=r("fXoL"),a=function(){var e=function e(){_classCallCheck(this,e)};return e.\u0275mod=o.Kb({type:e}),e.\u0275inj=o.Jb({factory:function(t){return new(t||e)},imports:[[n.b,i.l]]}),e}()},xgIS:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("HDdC"),i=r("DH7j"),o=r("n6bG"),a=r("lJxs");function l(e,t,r,s){return Object(o.a)(r)&&(s=r,r=void 0),s?l(e,t,r).pipe(Object(a.a)((function(e){return Object(i.a)(e)?s.apply(void 0,_toConsumableArray(e)):s(e)}))):new n.a((function(n){!function e(t,r,n,i,o){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(t)){var l=t;t.addEventListener(r,n,o),a=function(){return l.removeEventListener(r,n,o)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(t)){var s=t;t.on(r,n),a=function(){return s.off(r,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(t)){var c=t;t.addListener(r,n),a=function(){return c.removeListener(r,n)}}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(var u=0,d=t.length;u<d;u++)e(t[u],r,n,i,o)}i.add(a)}(e,t,(function(e){n.next(arguments.length>1?Array.prototype.slice.call(arguments):e)}),n,r)}))}}}]);
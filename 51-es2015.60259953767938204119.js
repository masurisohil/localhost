(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{"13Ln":function(t,e,i){"use strict";i.r(e);var n=i("FasR"),a=i("fXoL"),r=i("c8VH"),o=i("AytR"),s=i("tk/3");let c=(()=>{class t{constructor(t){this.http=t,this.API_URL=o.a.APIEndpoint}getUnitList(t){return this.http.get(`${this.API_URL}/unit`,{params:t})}addUnit(t){return this.http.post(`${this.API_URL}/unit`,t)}editUnit(t,e){return this.http.put(`${this.API_URL}/unit/${t}`,e)}getUnitById(t,e=null){return this.http.get(`${this.API_URL}/unit/${t}`,{params:e})}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(s.b))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac}),t})();var d=i("jTkZ"),u=i("Eb8l"),b=i("LPFR"),h=i("ofXK"),l=i("Pbud");function p(t,e){if(1&t){const t=a.Tb();a.Sb(0,"pagination",11),a.ac("onPageChange",(function(e){return a.vc(t),a.cc().getPage(e)})),a.Rb()}if(2&t){const t=a.cc();a.jc("paginationList",t.pagination)("currentPage",t.currentPage)}}let m=(()=>{class t{constructor(t,e){this.paginationService=t,this.unitservice=e,this.PageTitle="Manage Unit",this.loadform=!1,this.loadingState=!0,this.objectArray=[],this.pagination=null,this.searchText=null,this.currentPage=1,this.permissionObject=null,this.showPagination=!1,this.headerData=[]}ngOnInit(){this.loadform=!1,this.setHeaderData(),this.getObjects()}setHeaderData(){this.headerData.push(new n.i({label:"Unit Name",key:"unit_name"}),new n.i({label:"Unit Code",key:"unit_code"}));let t=new n.a({edit:{path:"/manage/unit/edit/",id:"unit_id"},delete:{path:"unit/",id:"unit_id"}});this.headerData.push(t)}getObjects(){const t={page:this.currentPage};this.searchText&&(t.search=this.searchText),this.unitservice.getUnitList(t).subscribe(t=>{this.loadingState=!1,t.success?(this.objectArray=t.data.list,this.showPagination=!0,this.pagination=this.paginationService.getPager(t.data.pagination.total_page,this.currentPage)):(this.objectArray=[],this.pagination=null)},t=>{this.loadingState=!1,this.objectArray=[],this.pagination=null})}getPage(t){this.currentPage=t,this.getObjects()}searchObject(t){this.searchText=t,this.currentPage=1,this.getObjects()}onReloadEvent(){this.getObjects()}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(r.a),a.Mb(c))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-unit-list"]],decls:13,vars:7,consts:[[1,"side-container"],[1,"page-header"],[1,"row","m-0"],[1,"mr-auto"],[1,"ml-3"],[3,"placeholder","text"],[3,"btnName","editData"],[1,"card"],[1,"card-body"],[3,"headerData","rawData","reloadEvent"],[3,"paginationList","currentPage","onPageChange",4,"ngIf"],[3,"paginationList","currentPage","onPageChange"]],template:function(t,e){1&t&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Sb(3,"h2",3),a.Dc(4),a.Rb(),a.Sb(5,"div",4),a.Sb(6,"search-box",5),a.ac("text",(function(t){return e.searchObject(t)})),a.Rb(),a.Rb(),a.Sb(7,"div",4),a.Nb(8,"app-btn-add",6),a.Rb(),a.Rb(),a.Rb(),a.Sb(9,"div",7),a.Sb(10,"div",8),a.Sb(11,"app-table-list",9),a.ac("reloadEvent",(function(){return e.onReloadEvent()})),a.Rb(),a.Bc(12,p,1,2,"pagination",10),a.Rb(),a.Rb(),a.Rb()),2&t&&(a.zb(4),a.Ec(e.PageTitle),a.zb(2),a.jc("placeholder","Search Here..."),a.zb(2),a.jc("btnName","Add Unit")("editData","/manage/unit/add"),a.zb(3),a.jc("headerData",e.headerData)("rawData",e.objectArray),a.zb(1),a.jc("ngIf",e.showPagination))},directives:[d.a,u.a,b.a,h.l,l.a],encapsulation:2}),t})();var g=i("3Pt+"),f=i("tyNb"),v=i("8cFx"),R=i("HOh6"),_=i("UaFz");function S(t,e){if(1&t&&a.Nb(0,"span",16),2&t){const t=a.cc();a.jc("innerHTML",t.formErrors.unit_name,a.wc)}}function w(t,e){if(1&t&&a.Nb(0,"span",16),2&t){const t=a.cc();a.jc("innerHTML",t.formErrors.unit_code,a.wc)}}const P=function(t){return{"has-error":t}},j=function(t){return{"qt-loader qt-loader-mini qt-loader-left":t}};let E=(()=>{class t{constructor(t,e,i,n,a){this.router=t,this.activatedRoute=e,this.fb=i,this.unitservice=n,this.commonservice=a,this.PageTitle="Unit",this.loadingState=!1,this.showLoader=!1,this.formErrors={unit_name:null,unit_code:null,apierror:null},this.isEditing=!1,this.editId=null,this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id")),this.addForm=this.fb.group({unit_name:[null,g.t.compose([g.t.required])],unit_code:[null,g.t.compose([g.t.required])]})}ngOnInit(){this.isEditing&&this.getEditObject()}getEditObject(){this.unitservice.getUnitById(this.editId).subscribe(t=>{t.success?this.addForm.patchValue(t.data):this.router.navigateByUrl("/manage/unit")})}submitForm(t){if(this.removeError(),t.valid){this.showLoader=!0;const e=new FormData;e.append("unit_name",t.value.unit_name),e.append("unit_code",t.value.unit_code),this.isEditing?this.unitservice.editUnit(this.editId,e).subscribe(t=>{this.showLoader=!1,t.success?this.router.navigateByUrl("/manage/unit"):t.error.map(e=>{e.hasOwnProperty("unit_name")?this.formErrors.unit_name=e.unit_name:e.hasOwnProperty("unit_code")?this.formErrors.unit_code=e.unit_code:this.formErrors.apierror=`* ${t.error}`})},t=>{this.showLoader=!1}):this.unitservice.addUnit(e).subscribe(t=>{this.showLoader=!1,t.success?this.router.navigateByUrl("/manage/unit"):t.error.map(e=>{e.hasOwnProperty("unit_name")?this.formErrors.unit_name=e.unit_name:e.hasOwnProperty("unit_code")?this.formErrors.unit_code=e.unit_code:this.formErrors.apierror=`* ${t.error}`})},t=>{this.showLoader=!1})}}removeError(){this.formErrors={unit_name:null,unit_code:null,apierror:null}}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(f.e),a.Mb(f.a),a.Mb(g.e),a.Mb(c),a.Mb(v.a))},t.\u0275cmp=a.Gb({type:t,selectors:[["app-unit-add"]],decls:31,vars:17,consts:[[1,"side-container"],[1,"page-header"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"card"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group","row","align-items-center"],[1,"control-label","text-md-right","col-md-4","col-lg-3","mb-0"],[1,"col-md-5",3,"ngClass"],["type","text","placeholder","",1,"form-control",3,"formControl"],["class","help-block",3,"innerHTML",4,"ngIf"],[1,"text-right","border-top","pt-4","mt-5","card-footer"],["type","button","routerLink","/manage/unit",1,"btn","btn-light"],["type","submit",1,"btn","btn-secondary","ml-2",3,"ngClass","disabled"],[1,"help-block",3,"innerHTML"]],template:function(t,e){1&t&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Sb(3,"div",3),a.Sb(4,"h2",4),a.Dc(5),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(6,"div",5),a.Sb(7,"form",6),a.ac("ngSubmit",(function(){return e.submitForm(e.addForm)})),a.Sb(8,"div",7),a.Sb(9,"div"),a.Sb(10,"div",8),a.Sb(11,"label",9),a.Dc(12," Unit Name "),a.Sb(13,"em"),a.Dc(14,"*"),a.Rb(),a.Rb(),a.Sb(15,"div",10),a.Nb(16,"input",11),a.Bc(17,S,1,1,"span",12),a.Rb(),a.Rb(),a.Sb(18,"div",8),a.Sb(19,"label",9),a.Dc(20,"Unit Code "),a.Sb(21,"em"),a.Dc(22,"*"),a.Rb(),a.Rb(),a.Sb(23,"div",10),a.Nb(24,"input",11),a.Bc(25,w,1,1,"span",12),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(26,"div",13),a.Sb(27,"button",14),a.Dc(28,"Cancel"),a.Rb(),a.Sb(29,"button",15),a.Dc(30,"Submit"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&t&&(a.zb(5),a.Gc("",e.isEditing?"Update":"Create"," ",e.PageTitle,""),a.zb(2),a.jc("formGroup",e.addForm),a.zb(8),a.jc("ngClass",a.nc(11,P,e.formErrors.unit_name)),a.zb(1),a.jc("formControl",e.addForm.controls.unit_name),a.zb(1),a.jc("ngIf",e.formErrors.unit_name),a.zb(6),a.jc("ngClass",a.nc(13,P,e.formErrors.unit_code)),a.zb(1),a.jc("formControl",e.addForm.controls.unit_code),a.zb(1),a.jc("ngIf",e.formErrors.unit_code),a.zb(4),a.jc("ngClass",a.nc(15,j,e.showLoader))("disabled",e.showLoader))},directives:[g.v,g.p,R.a,g.j,h.j,g.c,g.o,g.g,_.a,h.l,f.f],encapsulation:2}),t})();var y=i("g3N6"),L=i("uq2c"),U=i("OTx7"),D=i("PCNd"),I=i("Vr6k"),O=i("QSzr");i.d(e,"UnitModule",(function(){return C}));const z=[{path:"",component:m,data:{title:"unit_list"}},{path:"add",component:E,data:{title:"add_unit"}},{path:"edit/:id",component:E,data:{title:"edit_unit"}}];let C=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},providers:[c],imports:[[h.b,f.i.forChild(z),U.a,y.a,L.a,g.l,g.s,I.a,O.a,D.a]]}),t})()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{j9E3:function(e,t,i){"use strict";i.r(t);var r=i("ofXK"),a=i("tyNb"),s=i("g3N6"),n=i("uq2c"),o=i("OTx7"),l=i("ZOsW"),d=i("PCNd"),c=i("Vr6k"),b=i("3Pt+"),p=i("KUiO"),u=i("FasR"),h=i("fXoL"),m=i("c8VH"),g=i("AytR"),S=i("tk/3");let f=(()=>{class e{constructor(e){this.http=e,this.API_URL=g.a.APIEndpoint}getSuppliersList(e){return this.http.get(`${this.API_URL}/supplier`,{params:e})}addSuppliers(e){return this.http.post(`${this.API_URL}/supplier`,e)}editSuppliers(e,t){return this.http.put(`${this.API_URL}/supplier/${e}`,t)}getSuppliersById(e,t=null){return this.http.get(`${this.API_URL}/supplier/${e}`,{params:t})}getSuppliersMasterData(){return this.http.get(`${this.API_URL}/supplier/master-data`)}}return e.\u0275fac=function(t){return new(t||e)(h.Wb(S.b))},e.\u0275prov=h.Ib({token:e,factory:e.\u0275fac}),e})();var v=i("jTkZ"),R=i("Eb8l"),y=i("LPFR"),_=i("Pbud");function C(e,t){if(1&e){const e=h.Tb();h.Sb(0,"pagination",11),h.ac("onPageChange",(function(t){return h.uc(e),h.cc().getPage(t)})),h.Rb()}if(2&e){const e=h.cc();h.jc("paginationList",e.pagination)("currentPage",e.currentPage)}}let w=(()=>{class e{constructor(e,t){this.paginationService=e,this.supplierService=t,this.PageTitle="Manage Suppliers",this.loadform=!1,this.loadingState=!0,this.objectArray=[],this.pagination=null,this.searchText=null,this.currentPage=1,this.permissionObject=null,this.headerData=[],this.showPagination=!1}ngOnInit(){this.loadform=!1,this.setHeaderData(),this.getObjects()}setHeaderData(){this.headerData.push(new u.f({label:"Supplier Name",key:"supplier_name"}),new u.f({label:"Supplier Code",key:"supplier_code"}),new u.f({label:"Email",key:"email"}),new u.f({label:"Phone Number",key:"phone_number"}),new u.f({label:"Address\t",key:"address.country_name"}));let e=new u.a({edit:{path:"/manage/suppliers/edit/",id:"supplier_id"},delete:{path:"supplier/",id:"supplier_id"}});this.headerData.push(e)}getObjects(){const e={page:this.currentPage};this.searchText&&(e.search=this.searchText),this.supplierService.getSuppliersList(e).subscribe(e=>{this.loadingState=!1,e.success?(this.objectArray=e.data.list,this.showPagination=!0,this.pagination=this.paginationService.getPager(e.data.pagination.total_page,this.currentPage)):(this.objectArray=[],this.pagination=null)},e=>{this.loadingState=!1,this.objectArray=[],this.pagination=null})}getPage(e){this.currentPage=e,this.getObjects()}searchObject(e){this.searchText=e,this.currentPage=1,this.getObjects()}onReloadEvent(){this.getObjects()}}return e.\u0275fac=function(t){return new(t||e)(h.Mb(m.a),h.Mb(f))},e.\u0275cmp=h.Gb({type:e,selectors:[["app-suppliers-list"]],decls:13,vars:7,consts:[[1,"side-container"],[1,"page-header"],[1,"row","m-0"],[1,"mr-auto"],[1,"ml-3"],[3,"placeholder","text"],[3,"btnName","editData"],[1,"card"],[1,"card-body"],[3,"headerData","rawData","reloadEvent"],[3,"paginationList","currentPage","onPageChange",4,"ngIf"],[3,"paginationList","currentPage","onPageChange"]],template:function(e,t){1&e&&(h.Sb(0,"div",0),h.Sb(1,"div",1),h.Sb(2,"div",2),h.Sb(3,"h2",3),h.Cc(4),h.Rb(),h.Sb(5,"div",4),h.Sb(6,"search-box",5),h.ac("text",(function(e){return t.searchObject(e)})),h.Rb(),h.Rb(),h.Sb(7,"div",4),h.Nb(8,"app-btn-add",6),h.Rb(),h.Rb(),h.Rb(),h.Sb(9,"div",7),h.Sb(10,"div",8),h.Sb(11,"app-table-list",9),h.ac("reloadEvent",(function(){return t.onReloadEvent()})),h.Rb(),h.Ac(12,C,1,2,"pagination",10),h.Rb(),h.Rb(),h.Rb()),2&e&&(h.zb(4),h.Dc(t.PageTitle),h.zb(2),h.jc("placeholder","Search Here..."),h.zb(2),h.jc("btnName","Add Supplier")("editData","/manage/suppliers/add"),h.zb(3),h.jc("headerData",t.headerData)("rawData",t.objectArray),h.zb(1),h.jc("ngIf",t.showPagination))},directives:[v.a,R.a,y.a,r.l,_.a],encapsulation:2}),e})();var j=i("8cFx"),P=i("HOh6"),F=i("UaFz"),L=i("/SVk");function x(e,t){if(1&e&&h.Nb(0,"span",37),2&e){const e=h.cc();h.jc("innerHTML",e.formErrors.supplier_code,h.vc)}}const E=function(e){return{"has-error":e}};let N=(()=>{class e{constructor(e,t,i,r,a){this.router=e,this.activatedRoute=t,this.fb=i,this.supplierService=r,this.commonService=a,this.PageTitle="Suppliers",this.editImageUrl=null,this.addNewRadio=!1,this.categoryListArray=[],this.brandListArray=[],this.loadingState=!1,this.showLoader=!1,this.formErrors={supplier_code:null,apierror:null},this.isEditing=!1,this.editId=null,this.countryListArray=[],this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id")),this.addForm=this.fb.group({supplier_name:[null,b.t.compose([b.t.required])],supplier_code:[null,b.t.compose([b.t.required])],phone_number:[null,b.t.compose([b.t.required])],dial_code:[null,b.t.compose([b.t.required])],email:[null,b.t.compose([b.t.required,b.t.email])],address:[null],country_name:[null],country_id:[null,b.t.compose([b.t.required])],state:[null,b.t.compose([b.t.required])],city:[null,b.t.compose([b.t.required])],street_address:[null,b.t.compose([b.t.required])]})}ngOnInit(){this.getCountryList(),this.isEditing&&this.getEditObject()}getCountryList(){this.commonService.getCountryList().subscribe(e=>{e.success&&(this.countryListArray=e.data.country_list)})}getCountryName(e){this.addForm.patchValue({country_name:e.label})}getEditObject(){this.supplierService.getSuppliersById(this.editId).subscribe(e=>{e.success?(this.editImageUrl=e.data.image,this.addForm.patchValue({supplier_name:e.data.supplier_name,category_id:e.data.category_id,dial_code:e.data.dial_code,supplier_code:e.data.supplier_code,phone_number:e.data.phone_number,email:e.data.email,country_id:e.data.address.country_id,country_name:e.data.address.country_name,state:e.data.address.state,city:e.data.address.city,street_address:e.data.address.street_address?e.data.address.street_address:""})):this.router.navigateByUrl("/manage/suppliers")})}fileChangeEvent(e){if(!e.target.files[0].name.match(/(.*?)\.(jpg|jpeg|png|gif|giff)$/))return swal.fire("Invalid File!","Please select valid file ","error"),this.removeFile(),!1;this.removeFile(),this.selectedFile=e.target.files[0]}removeFile(){this.selectedFile=null}submitForm(e){if(e.valid){this.showLoader=!0;const t=new FormData;t.append("supplier_name",e.value.supplier_name),t.append("supplier_code",e.value.supplier_code),t.append("phone_number",e.value.phone_number),t.append("dial_code",e.value.dial_code),t.append("email",e.value.email),t.append("address",JSON.stringify({country_id:e.value.country_id,country_name:e.value.country_name,state:e.value.state,city:e.value.city,street_address:e.value.street_address})),this.selectedFile&&t.append("file",this.selectedFile),this.isEditing?this.supplierService.editSuppliers(this.editId,t).subscribe(e=>{this.showLoader=!1,e.success?this.router.navigateByUrl("/manage/suppliers"):e.error.map(t=>{t.hasOwnProperty("supplier_code")?this.formErrors.supplier_code=t.supplier_code:this.formErrors.apierror=`* ${e.error}`})},e=>{this.showLoader=!1}):this.supplierService.addSuppliers(t).subscribe(e=>{this.showLoader=!1,e.success?this.router.navigateByUrl("/manage/suppliers"):e.error.map(t=>{t.hasOwnProperty("supplier_code")?this.formErrors.supplier_code=t.supplier_code:this.formErrors.apierror=`* ${e.error}`})},e=>{this.showLoader=!1})}}}return e.\u0275fac=function(t){return new(t||e)(h.Mb(a.e),h.Mb(a.a),h.Mb(b.e),h.Mb(f),h.Mb(j.a))},e.\u0275cmp=h.Gb({type:e,selectors:[["app-add-suppliers"]],decls:101,vars:18,consts:[[1,"side-container"],[1,"page-header"],[1,"row","m-0"],[1,"col"],[1,"mr-auto"],[1,"card"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"row"],[1,"col-4"],[1,"clearfix"],["data-provides","fileinput",1,"fileinput","text-center","fileinput-new"],[1,"btn-file","mt-3"],[1,"thumbnail","fileinput-new","uploaded-user-image","rounded-circle",2,"width","150px","height","150px"],["alt","",3,"src"],[1,"fileinput-new","btn","btn-dark","btn-sm","btn-file","mt-3"],["accept","image/x-png,image/jpeg","type","file","file-model","myFile",3,"change"],[1,"fileinput-preview","fileinput-exists","thumbnail","uploaded-user-image","rounded-circle",2,"width","150px","height","150px"],[1,"text-center"],["data-dismiss","fileinput",1,"btn","btn-link","btn-sm","fileinput-exists","mt-3",3,"click"],[1,"clearfix","mt-3"],[1,"upload-img-label","text-muted","font-size-12"],[1,"col-8"],[1,"col-6"],[1,"form-group"],[1,"control-label","text-md-right"],[1,""],["type","text","placeholder","",1,"form-control",3,"formControl"],[1,"",3,"ngClass"],["class","help-block",3,"innerHTML",4,"ngIf"],["bindLabel","label","bindValue","value","placeholder","Select Country",3,"formControl","items","change"],[1,"d-flex"],["number","","type","text","placeholder","Enter dial number",1,"form-control","mr-2",2,"width","100px",3,"formControl"],["number","","type","text","placeholder","Enter phone number",1,"form-control",3,"formControl"],[1,"text-right","border-top","py-4","mt-5","card-footer"],["type","button","routerLink","/manage/suppliers",1,"btn","btn-light"],["type","submit",1,"btn","btn-secondary","ml-2"],[1,"help-block",3,"innerHTML"]],template:function(e,t){1&e&&(h.Sb(0,"div",0),h.Sb(1,"div",1),h.Sb(2,"div",2),h.Sb(3,"div",3),h.Sb(4,"h2",4),h.Cc(5),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(6,"div",5),h.Sb(7,"form",6),h.ac("ngSubmit",(function(){return t.submitForm(t.addForm)})),h.Sb(8,"div",7),h.Sb(9,"div"),h.Sb(10,"div",8),h.Sb(11,"div",9),h.Sb(12,"div",10),h.Sb(13,"div",11),h.Sb(14,"div",12),h.Sb(15,"div",13),h.Nb(16,"img",14),h.Rb(),h.Nb(17,"div",10),h.Sb(18,"button",15),h.Cc(19," Browse Image "),h.Rb(),h.Sb(20,"input",16),h.ac("change",(function(e){return t.fileChangeEvent(e)})),h.Rb(),h.Nb(21,"div",17),h.Rb(),h.Sb(22,"div",18),h.Sb(23,"a",19),h.ac("click",(function(){return t.removeFile()})),h.Cc(24,"Remove"),h.Rb(),h.Rb(),h.Sb(25,"div",20),h.Sb(26,"p",21),h.Cc(27,"*Recommended Size:"),h.Nb(28,"br"),h.Cc(29,"Minimum 250 * 250"),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(30,"div",22),h.Sb(31,"div",8),h.Sb(32,"div",23),h.Sb(33,"div",24),h.Sb(34,"label",25),h.Cc(35,"Supplier Name "),h.Sb(36,"em"),h.Cc(37,"*"),h.Rb(),h.Rb(),h.Sb(38,"div",26),h.Nb(39,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Sb(40,"div",23),h.Sb(41,"div",24),h.Sb(42,"label",25),h.Cc(43,"Supplier Code "),h.Sb(44,"em"),h.Cc(45,"*"),h.Rb(),h.Rb(),h.Sb(46,"div",28),h.Nb(47,"input",27),h.Ac(48,x,1,1,"span",29),h.Rb(),h.Rb(),h.Rb(),h.Sb(49,"div",23),h.Sb(50,"div",24),h.Sb(51,"label",25),h.Cc(52,"Country "),h.Sb(53,"em"),h.Cc(54,"*"),h.Rb(),h.Rb(),h.Sb(55,"div",26),h.Sb(56,"ng-select",30),h.ac("change",(function(e){return t.getCountryName(e)})),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(57,"div",23),h.Sb(58,"div",24),h.Sb(59,"label",25),h.Cc(60,"State "),h.Sb(61,"em"),h.Cc(62,"*"),h.Rb(),h.Rb(),h.Sb(63,"div",26),h.Nb(64,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Sb(65,"div",23),h.Sb(66,"div",24),h.Sb(67,"label",25),h.Cc(68,"City "),h.Sb(69,"em"),h.Cc(70,"*"),h.Rb(),h.Rb(),h.Sb(71,"div",26),h.Nb(72,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Sb(73,"div",23),h.Sb(74,"div",24),h.Sb(75,"label",25),h.Cc(76,"Street Address "),h.Sb(77,"em"),h.Cc(78,"*"),h.Rb(),h.Rb(),h.Sb(79,"div",26),h.Nb(80,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(81,"div",24),h.Sb(82,"label",25),h.Cc(83,"Phone Number "),h.Sb(84,"em"),h.Cc(85,"*"),h.Rb(),h.Rb(),h.Sb(86,"div",31),h.Nb(87,"input",32),h.Nb(88,"input",33),h.Rb(),h.Rb(),h.Sb(89,"div",24),h.Sb(90,"label",25),h.Cc(91,"Email "),h.Sb(92,"em"),h.Cc(93,"*"),h.Rb(),h.Rb(),h.Sb(94,"div",26),h.Nb(95,"input",27),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(96,"div",34),h.Sb(97,"button",35),h.Cc(98,"Cancel"),h.Rb(),h.Sb(99,"button",36),h.Cc(100,"Submit"),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb()),2&e&&(h.zb(5),h.Fc("",t.isEditing?"Update":"Create"," ",t.PageTitle,""),h.zb(2),h.jc("formGroup",t.addForm),h.zb(9),h.jc("src",t.editImageUrl?t.editImageUrl:"assets/no_image.png",h.wc),h.zb(23),h.jc("formControl",t.addForm.controls.supplier_name),h.zb(7),h.jc("ngClass",h.nc(16,E,t.formErrors.supplier_code)),h.zb(1),h.jc("formControl",t.addForm.controls.supplier_code),h.zb(1),h.jc("ngIf",t.formErrors.supplier_code),h.zb(8),h.jc("formControl",t.addForm.controls.country_id)("items",t.countryListArray),h.zb(8),h.jc("formControl",t.addForm.controls.state),h.zb(8),h.jc("formControl",t.addForm.controls.city),h.zb(8),h.jc("formControl",t.addForm.controls.street_address),h.zb(7),h.jc("formControl",t.addForm.controls.dial_code),h.zb(1),h.jc("formControl",t.addForm.controls.phone_number),h.zb(7),h.jc("formControl",t.addForm.controls.email))},directives:[b.v,b.p,P.a,b.j,b.c,b.o,b.g,F.a,r.j,r.l,l.a,L.a,a.f],encapsulation:2}),e})();var I=i("QSzr");i.d(t,"SuppliersModule",(function(){return A}));const z=[{path:"",component:w,data:{title:"suppliers_list"}},{path:"add",component:N,data:{title:"add_suppliers"}},{path:"edit/:id",component:N,data:{title:"edit_suppliers"}}];let A=(()=>{class e{}return e.\u0275mod=h.Kb({type:e}),e.\u0275inj=h.Jb({factory:function(t){return new(t||e)},providers:[f],imports:[[r.b,a.i.forChild(z),o.a,s.a,n.a,b.l,b.s,c.a,d.a,I.a,p.a,l.b]]}),e})()}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{"YvJ/":function(t,e,a){"use strict";a.r(e);var r=a("ofXK"),o=a("tyNb"),i=a("g3N6"),n=a("uq2c"),c=a("FasR"),s=a("fXoL"),d=a("c8VH"),l=a("AytR"),g=a("tk/3");let b=(()=>{class t{constructor(t){this.http=t,this.API_URL=l.a.APIEndpoint}getCategoryList(t){return this.http.get(`${this.API_URL}/category`,{params:t})}addCategory(t){return this.http.post(`${this.API_URL}/category`,t)}editCategory(t,e){return this.http.put(`${this.API_URL}/category/${t}`,e)}getCategoryById(t,e=null){return this.http.get(`${this.API_URL}/category/${t}`,{params:e})}getCategoryMasterData(){return this.http.get(`${this.API_URL}/category/master-data`)}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(g.b))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac}),t})();var h=a("jTkZ"),u=a("Eb8l"),p=a("LPFR"),m=a("Pbud");function y(t,e){if(1&t&&(s.Sb(0,"span",17),s.Bc(1),s.Rb()),2&t){const t=s.cc(2);s.zb(1),s.Dc("",t.parentCategoryCount," ")}}function v(t,e){if(1&t){const t=s.Tb();s.Sb(0,"span",12),s.Bc(1),s.zc(2,y,2,1,"span",13),s.Sb(3,"span",14),s.Sb(4,"a",15),s.ac("click",(function(){return s.tc(t),s.cc().resetData()})),s.Nb(5,"i",16),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=s.cc();s.zb(1),s.Dc(" ",t.categoryName," "),s.zb(1),s.ic("ngIf",t.parentCategoryCount)}}function f(t,e){if(1&t){const t=s.Tb();s.Sb(0,"pagination",18),s.ac("onPageChange",(function(e){return s.tc(t),s.cc().getPage(e)})),s.Rb()}if(2&t){const t=s.cc();s.ic("paginationList",t.pagination)("currentPage",t.currentPage)}}let S=(()=>{class t{constructor(t,e){this.paginationService=t,this.categoryService=e,this.PageTitle="Manage Category",this.loadform=!1,this.loadingState=!0,this.objectArray=[],this.pagination=null,this.searchText=null,this.currentPage=1,this.permissionObject=null,this.headerData=[],this.showPagination=!1,this.parentCategoryId=!1,this.categoryName=!1,this.parentCategoryCount=!1}ngOnInit(){this.loadform=!1,this.setHeaderData(),this.getObjects()}setHeaderData(){this.headerData.push(new c.f({label:"Category name",key:"category_name"}),new c.e({label:"Sub Category Count",key:"parent_category_id"}),new c.f({label:"Height(cm)",key:"volume.height"}),new c.f({label:"Width(cm)",key:"volume.width"}),new c.f({label:"Depth(cm)",key:"volume.depth"}));let t=new c.a({edit:{path:"/manage/category/edit/",id:"category_id"},delete:{path:"category/",id:"category_id"}});this.headerData.push(t)}getObjects(){const t={page:this.currentPage};this.searchText&&(t.search=this.searchText),this.parentCategoryId&&(t.parent_category_id=this.parentCategoryId),this.categoryService.getCategoryList(t).subscribe(t=>{this.loadingState=!1,t.success?(this.objectArray=t.data.list,this.showPagination=!0,this.pagination=this.paginationService.getPager(t.data.pagination.total_page,this.currentPage)):(this.objectArray=[],this.pagination=null)},t=>{this.loadingState=!1,this.objectArray=[],this.pagination=null})}getPage(t){this.currentPage=t,this.getObjects()}onClickEvent(t){t.category_id&&t.parent_category_id&&(this.categoryName=t.category_name,this.parentCategoryCount=t.parent_category_id,this.parentCategoryId=t.category_id,this.currentPage=1,this.getObjects())}resetData(){this.categoryName=!1,this.parentCategoryCount=!1,this.parentCategoryId=!1,this.getObjects()}searchObject(t){this.searchText=t,this.currentPage=1,this.getObjects()}onReloadEvent(){this.getObjects()}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(d.a),s.Mb(b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-category-list"]],decls:14,vars:8,consts:[[1,"side-container"],[1,"page-header"],[1,"row","m-0"],[1,"mr-auto"],["class","badge badge-pill badge-light","style","font-size: 14px; font-weight: 400;",4,"ngIf"],[1,"ml-3"],[3,"placeholder","text"],[3,"btnName","editData"],[1,"card"],[1,"card-body"],[3,"headerData","rawData","reloadEvent","clickEvent"],[3,"paginationList","currentPage","onPageChange",4,"ngIf"],[1,"badge","badge-pill","badge-light",2,"font-size","14px","font-weight","400"],["class","badge badge-pill badge-info",4,"ngIf"],[1,"badge"],[3,"click"],["data-toggle","tooltip","data-placement","top","title","Reset Filter","aria-hidden","true",1,"ml-2","fa","fa-times"],[1,"badge","badge-pill","badge-info"],[3,"paginationList","currentPage","onPageChange"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"h2",3),s.Bc(4),s.zc(5,v,6,2,"span",4),s.Rb(),s.Sb(6,"div",5),s.Sb(7,"search-box",6),s.ac("text",(function(t){return e.searchObject(t)})),s.Rb(),s.Rb(),s.Sb(8,"div",5),s.Nb(9,"app-btn-add",7),s.Rb(),s.Rb(),s.Rb(),s.Sb(10,"div",8),s.Sb(11,"div",9),s.Sb(12,"app-table-list",10),s.ac("reloadEvent",(function(){return e.onReloadEvent()}))("clickEvent",(function(t){return e.onClickEvent(t)})),s.Rb(),s.zc(13,f,1,2,"pagination",11),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(4),s.Dc("",e.PageTitle," "),s.zb(1),s.ic("ngIf",e.categoryName),s.zb(2),s.ic("placeholder","Search Here..."),s.zb(2),s.ic("btnName","Add Category")("editData","/manage/category/add"),s.zb(3),s.ic("headerData",e.headerData)("rawData",e.objectArray),s.zb(1),s.ic("ngIf",e.showPagination))},directives:[r.l,h.a,u.a,p.a,m.a],encapsulation:2}),t})();var R=a("3Pt+"),_=a("HOh6"),C=a("UaFz"),w=a("ZOsW"),P=a("/SVk");function I(t,e){if(1&t&&s.Nb(0,"span",26),2&t){const t=s.cc();s.ic("innerHTML",t.formErrors.category_code,s.uc)}}const z=function(t){return{"has-error":t}};let L=(()=>{class t{constructor(t,e,a,r){this.router=t,this.activatedRoute=e,this.fb=a,this.categoryService=r,this.PageTitle="Category",this.addNewRadio=!1,this.categoryListArray=[],this.loadingState=!1,this.showLoader=!1,this.formErrors={category_code:null,apierror:null},this.isEditing=!1,this.editId=null,this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id")),this.addForm=this.fb.group({category_name:[null,R.t.compose([R.t.required])],category_code:[null,R.t.compose([R.t.required])],parent_category_id:[""],description:[null],height:[null,R.t.compose([R.t.required])],width:[null,R.t.compose([R.t.required])],depth:[null,R.t.compose([R.t.required])],unit:["cm",R.t.compose([R.t.required])],total_volume:[0]})}ngOnInit(){this.getMasterData(),this.isEditing&&this.getEditObject()}volumeCal(){let t=parseInt(this.addForm.value.height?this.addForm.value.height:1)*parseInt(this.addForm.value.width?this.addForm.value.width:1)*parseInt(this.addForm.value.depth?this.addForm.value.depth:1);this.addForm.patchValue({total_volume:t||0})}getMasterData(){this.categoryService.getCategoryMasterData().subscribe(t=>{t.success&&(this.categoryListArray=t.data.category)})}getEditObject(){this.categoryService.getCategoryById(this.editId).subscribe(t=>{t.success?this.addForm.patchValue({category_name:t.data.category_name,category_code:t.data.category_code,parent_category_id:t.data.parent_category_id,description:t.data.description,width:t.data.volume.width,height:t.data.volume.height,depth:t.data.volume.depth,unit:t.data.volume.unit,total_volume:t.data.volume.total_volume}):this.router.navigateByUrl("/manage/category")})}submitForm(t){if(t.valid){this.showLoader=!0;const e=new FormData;e.append("category_name",t.value.category_name),e.append("category_code",t.value.category_code),e.append("parent_category_id",t.value.parent_category_id?t.value.parent_category_id:""),e.append("description",t.value.description),e.append("volume",JSON.stringify({width:t.value.width,unit:t.value.unit,height:t.value.height,depth:t.value.depth,total_volume:t.value.total_volume})),this.isEditing?this.categoryService.editCategory(this.editId,e).subscribe(t=>{this.showLoader=!1,t.success?this.router.navigateByUrl("/manage/category"):t.error.map(e=>{e.hasOwnProperty("category_code")?this.formErrors.category_code=e.category_code:this.formErrors.apierror=`* ${t.error}`})},t=>{this.showLoader=!1}):this.categoryService.addCategory(e).subscribe(t=>{this.showLoader=!1,t.success?this.router.navigateByUrl("/manage/category"):t.error.map(e=>{e.hasOwnProperty("category_code")?this.formErrors.category_code=e.category_code:this.formErrors.apierror=`* ${t.error}`})},t=>{this.showLoader=!1})}}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(o.e),s.Mb(o.a),s.Mb(R.e),s.Mb(b))},t.\u0275cmp=s.Gb({type:t,selectors:[["app-add-category"]],decls:56,vars:16,consts:[[1,"side-container"],[1,"page-header"],[1,"row"],[1,"col"],[1,"mr-auto"],[1,"card"],["role","form",1,"form-horizontal",3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group","row"],[1,"control-label","text-md-right","col-md-4","col-lg-3"],[1,"col-md-5"],["type","text","placeholder","",1,"form-control",3,"formControl"],[1,"col-md-5",3,"ngClass"],["class","help-block",3,"innerHTML",4,"ngIf"],["bindLabel","label","bindValue","value","placeholder","Select Parent Category",3,"formControl","items"],[1,"col-md-5","mr-2"],["number","","type","text","placeholder","Height",1,"form-control",3,"formControl","change"],["aria-hidden","true",1,"la","la-times","mt-2"],["number","","type","text","placeholder","Width",1,"form-control",3,"formControl","change"],["number","","type","text","placeholder","Depth",1,"form-control",3,"formControl","change"],[1,"la","la-equals","mt-2"],["number","","type","text","placeholder","","disabled","",1,"form-control",3,"formControl"],["rows","2",1,"form-control",3,"formControl"],[1,"text-right","border-top","py-4","mt-5","card-footer"],["type","button","routerLink","/manage/category",1,"btn","btn-light"],["type","submit",1,"btn","btn-secondary","ml-2"],[1,"help-block",3,"innerHTML"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Sb(4,"h2",4),s.Bc(5),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(6,"div",5),s.Sb(7,"form",6),s.ac("ngSubmit",(function(){return e.submitForm(e.addForm)})),s.Sb(8,"div",7),s.Sb(9,"div"),s.Sb(10,"div",8),s.Sb(11,"label",9),s.Bc(12,"Category Name "),s.Sb(13,"em"),s.Bc(14,"*"),s.Rb(),s.Rb(),s.Sb(15,"div",10),s.Nb(16,"input",11),s.Rb(),s.Rb(),s.Sb(17,"div",8),s.Sb(18,"label",9),s.Bc(19,"Category code "),s.Sb(20,"em"),s.Bc(21,"*"),s.Rb(),s.Rb(),s.Sb(22,"div",12),s.Nb(23,"input",11),s.zc(24,I,1,1,"span",13),s.Rb(),s.Rb(),s.Sb(25,"div",8),s.Sb(26,"label",9),s.Bc(27,"Parent Category Name "),s.Rb(),s.Sb(28,"div",10),s.Nb(29,"ng-select",14),s.Rb(),s.Rb(),s.Sb(30,"div",8),s.Sb(31,"label",9),s.Bc(32,"Volume(cm)"),s.Rb(),s.Sb(33,"div",15),s.Sb(34,"div",2),s.Sb(35,"div",3),s.Sb(36,"input",16),s.ac("change",(function(){return e.volumeCal()})),s.Rb(),s.Rb(),s.Nb(37,"i",17),s.Sb(38,"div",3),s.Sb(39,"input",18),s.ac("change",(function(){return e.volumeCal()})),s.Rb(),s.Rb(),s.Nb(40,"i",17),s.Sb(41,"div",3),s.Sb(42,"input",19),s.ac("change",(function(){return e.volumeCal()})),s.Rb(),s.Rb(),s.Nb(43,"i",20),s.Sb(44,"div",3),s.Nb(45,"input",21),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(46,"div",8),s.Sb(47,"label",9),s.Bc(48,"Description"),s.Rb(),s.Sb(49,"div",10),s.Nb(50,"textarea",22),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(51,"div",23),s.Sb(52,"button",24),s.Bc(53,"Cancel"),s.Rb(),s.Sb(54,"button",25),s.Bc(55,"Submit"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.zb(5),s.Ec("",e.isEditing?"Update":"Create"," ",e.PageTitle,""),s.zb(2),s.ic("formGroup",e.addForm),s.zb(9),s.ic("formControl",e.addForm.controls.category_name),s.zb(6),s.ic("ngClass",s.mc(14,z,e.formErrors.category_code)),s.zb(1),s.ic("formControl",e.addForm.controls.category_code),s.zb(1),s.ic("ngIf",e.formErrors.category_code),s.zb(5),s.ic("formControl",e.addForm.controls.parent_category_id)("items",e.categoryListArray),s.zb(7),s.ic("formControl",e.addForm.controls.height),s.zb(3),s.ic("formControl",e.addForm.controls.width),s.zb(3),s.ic("formControl",e.addForm.controls.depth),s.zb(3),s.ic("formControl",e.addForm.controls.total_volume),s.zb(5),s.ic("formControl",e.addForm.controls.description))},directives:[R.v,R.p,_.a,R.j,R.c,R.o,R.g,C.a,r.j,r.l,w.a,P.a,o.f],encapsulation:2}),t})();var E=a("OTx7"),F=a("PCNd"),D=a("Vr6k"),N=a("QSzr");a.d(e,"CategoryModule",(function(){return k}));const j=[{path:"",component:S,data:{title:"category_list"}},{path:"add",component:L,data:{title:"add_category"}},{path:"edit/:id",component:L,data:{title:"edit_category"}}];let k=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[b],imports:[[r.b,o.i.forChild(j),E.a,i.a,n.a,R.l,R.s,D.a,F.a,N.a,w.b]]}),t})()}}]);